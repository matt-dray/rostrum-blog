---
title: 'Travel the NBA with {rvest}, {leaflet} and {osrm}'
author: Matt Dray
date: '2018-12-24'
slug: nba-travel
categories:
  - code
  - tutorial
tags:
  - dplyr
  - ggplot2
  - leaflet
  - nba
  - osrm
  - plotly
  - rvest
  - sport
  - stringr
  - tidyr
  - tidyverse
  - web-scrape
draft: no
---

<link href="/rmarkdown-libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>
<script src="/rmarkdown-libs/leaflet-providers/leaflet-providers_1.9.0.js"></script>
<script src="/rmarkdown-libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
<link href="/rmarkdown-libs/leaflet-awesomemarkers/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-awesomemarkers/leaflet.awesome-markers.min.js"></script>
<link href="/rmarkdown-libs/ionicons/ionicons.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/leaflet-measure/leaflet-measure.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-measure/leaflet-measure.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="/rmarkdown-libs/dt-ext-buttons/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-ext-buttons/js/dataTables.buttons.min.js"></script>
<script src="/rmarkdown-libs/dt-ext-buttons/js/buttons.flash.min.js"></script>
<script src="/rmarkdown-libs/dt-ext-buttons/js/buttons.html5.min.js"></script>
<script src="/rmarkdown-libs/dt-ext-buttons/js/buttons.colVis.min.js"></script>
<script src="/rmarkdown-libs/dt-ext-buttons/js/buttons.print.min.js"></script>
<link href="/rmarkdown-libs/dt-ext-scroller/css/scroller.dataTables.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-ext-scroller/js/dataTables.scroller.min.js"></script>
<link href="/rmarkdown-libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/nouislider/jquery.nouislider.min.js"></script>
<link href="/rmarkdown-libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="/rmarkdown-libs/selectize/selectize.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<div class="figure">
<img src="https://media.giphy.com/media/GOIl4CelYNleM/giphy.gif" alt="John Stockton passes the basketball to Karl Malone who dunks it." width="75%"/>
<p class="caption">
Classic Jazz: Stockton to Malone for the dunk (<a href="https://giphy.com/gifs/vintage-basketball-GOIl4CelYNleM">via Giphy</a>)
</p>
</div>
<div class="tip">
<p><i class="fas  fa-exclamation-circle "></i> <b>Note</b></p>
<p>The original version of this post (December 2018) used <a href="https://github.com/rodazuero/gmapsdistance" target="_blank">the {gmapsdistance} package</a>. I updated it extensively in 2020 to use the {osrm} package, which doesn’t require an API key nor billing details.</p>
</div>
<div id="tldr" class="section level1">
<h1>tl;dr</h1>
<p><a href="https://github.com/rCarto/osrm" target="_blank">The {osrm} R package</a> can retrieve from <a href="http://project-osrm.org/" target="_blank">the OSRM API</a> the travel duration between points. I looked at these data for NBA basketball-team arenas, whose details I scraped from the web using <a href="https://rvest.tidyverse.org/" target="_blank">{rvest}</a> and mapped with <a href="https://rstudio.github.io/leaflet/" target="_blank">{leaflet}</a>.</p>
</div>
<div id="on-the-road" class="section level1">
<h1>On the road</h1>
<p>Fans don’t have far to travel in the UK if they want to see their favourite sports team play an away match.</p>
<p>The USA is pretty big, though.</p>
<p>The National Basketball Association (NBA) compensates by separating its teams into Eastern and Western conferences, each with three divisions of five teams. This means that the majority of <a href="https://en.wikipedia.org/wiki/National_Basketball_Association#Regular_season" target="_blank">regular-season games</a> aren’t too far away.</p>
<p>But this varies. Teams are clustered near Lakes Michigan and Erie in the Central division, but the Northwest division stretches from Portland in the Pacific Northwest to Oklahoma City in the centre-south of the country.</p>
<p>What would it take to be a basketball fan who wanted to drive to away games? How long would it take?</p>
</div>
<div id="r-can-help" class="section level1">
<h1>R can help</h1>
<p>Surprise, this is all a ruse for me to practice with some R packages:</p>
<ul>
<li><a href="https://rvest.tidyverse.org/" target="_blank">{rvest}</a> for scraping web pages</li>
<li><a href="https://rstudio.github.io/leaflet/" target="_blank">{leaflet}</a> for interactive mapping</li>
<li><a href="https://github.com/rCarto/osrm" target="_blank">{osrm}</a> for calculating duration of travel between points</li>
</ul>
<p>There’s four main parts to the post (click to jump):</p>
<ol style="list-style-type: decimal">
<li><a href="#scrape">Scrape team data</a></li>
<li><a href="#map">Map the locations</a></li>
<li><a href="#travel">Get travel duration</a></li>
<li><a href="#viz">Make a heatmap</a></li>
</ol>
<p>Let’s start by attaching the packages we need. As always, make sure these are installed first, using <code>install.packages()</code>.</p>
<pre class="r"><code># Tidyverse
library(tidyverse)  # data handling and plotting
library(rvest)      # scrape data

# Geography and travel
library(sf)         # handle geographies
library(osrm)       # fetch travel info

# Interactive elements
library(leaflet)    # interactive maps
library(DT)         # interactive tables
library(plotly)     # interactive plots</code></pre>
<div id="scrape" class="section level2">
<h2>1. Scrape team data</h2>
<div id="use-rvest" class="section level3">
<h3>Use {rvest}</h3>
<p>The Wikipedia page for the NBA has a table with each team and its location, including coordinates. We can use <a href="https://rvest.tidyverse.org/" target="_blank">the {rvest} web-scraping package</a> to extract that table into a data frame with these steps:</p>
<ol style="list-style-type: decimal">
<li>Read the HTML of the page with <code>xml2::read_html()</code></li>
<li>Extract the HTML node for the table with <code>rvest::html_nodes()</code></li>
<li>Parse the HTML as a table with <code>rvest::html_table()</code></li>
</ol>
<p>Note that you have to provide to <code>html_nodes()</code> a CSS selector or an XPath that identifies the table’s ‘location’ in the HTML. You can find these using a tool like <a href="https://selectorgadget.com/" target="_blank">SelectorGadget</a>, or with your browser’s ‘inspect’ tool (for Chrome, right-click the element on the page, select ‘inspect’, right-click the HTML for that element, go to ‘Copy’, then ’Copy full XPath).</p>
<pre class="r"><code>nba_scrape &lt;-
  read_html(&quot;https://en.wikipedia.org/wiki/National_Basketball_Association&quot;) %&gt;% 
  html_nodes(xpath = &quot;/html/body/div[3]/div[3]/div[5]/div[1]/table[4]&quot;) %&gt;%
  html_table(fill = TRUE, header = NA) %&gt;%
  .[[1]]  # list was returned, so extract first list element

glimpse(nba_scrape)  # a data frame</code></pre>
<pre><code>## Rows: 32
## Columns: 9
## $ Division      &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic…
## $ Team          &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;Boston Celtics&quot;, &quot;Brooklyn Nets&quot;…
## $ `City, State` &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;Boston, Massachusetts&quot;, &quot;New Yor…
## $ Arena         &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;TD Garden&quot;, &quot;Barclays Center&quot;, &quot;…
## $ Capacity      &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;18,624&quot;, &quot;17,732&quot;, &quot;19,812&quot;, &quot;21…
## $ Coordinates   &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;42°21′59″N 71°03′44″W﻿ / ﻿42.366…
## $ Founded       &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;1946&quot;, &quot;1967*&quot;, &quot;1946&quot;, &quot;1946*&quot;,…
## $ Joined        &lt;chr&gt; &quot;Eastern Conference&quot;, &quot;1946&quot;, &quot;1976&quot;, &quot;1946&quot;, &quot;1949&quot;, &quot;…
## $ NA            &lt;chr&gt; &quot;Eastern Conference&quot;, NA, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
<p>So, the table has been returned, but it needs to be tidied up.</p>
</div>
<div id="wrangle-the-data" class="section level3">
<h3>Wrangle the data</h3>
<p>To summarise the main cleaning steps required:</p>
<ul>
<li>remove the rogue <code>NA</code>-filled column</li>
<li>filter out the spanning headers that identify the conferences</li>
<li>add a column for each team’s conference</li>
<li>make numeric the arena capacity</li>
<li>separate city and state into separate columns</li>
<li>isolate the latitude and longitude by separating them from the <code>Coordinates</code> column</li>
<li>remove the ‘zero width no-break space’ unicode character in the longitude column</li>
<li>retain only the columns of interest</li>
</ul>
<pre class="r"><code>nba_wrangle &lt;- nba_scrape %&gt;% 
  select(-length(.)) %&gt;%  # remove the last column (NA)
  dplyr::filter(!str_detect(Division, &quot;Conference&quot;)) %&gt;% 
  mutate(
    Conference = c(rep(&quot;Eastern&quot;, 15), rep(&quot;Western&quot;, 15)),
    Capacity = as.numeric(str_remove(Capacity, &quot;,&quot;))
  ) %&gt;% 
  separate(`City, State`, c(&quot;City&quot;, &quot;State&quot;), sep = &quot;, &quot;) %&gt;% 
  separate(Coordinates, c(&quot;Coords1&quot;, &quot;Coords2&quot;, &quot;Coords3&quot;), &quot; / &quot;) %&gt;% 
  separate(Coords3, c(&quot;Latitude&quot;, &quot;Longitude&quot;), sep = &quot;; &quot;) %&gt;% 
  separate(Longitude, c(&quot;Longitude&quot;, &quot;X&quot;), sep = &quot; \\(&quot;) %&gt;% 
  mutate(
    Latitude = as.numeric(Latitude),
    Longitude = as.numeric(
      str_remove(Longitude, &quot;\\ufeff&quot;)  # remove rogue unicode
    )  
  ) %&gt;% 
  select(
    Team, Conference, everything(),
    -Founded, -Joined, -Coords1, -Coords2, -X
  ) %&gt;% 
  as_tibble()  # convert to tibble

glimpse(nba_wrangle)</code></pre>
<pre><code>## Rows: 30
## Columns: 9
## $ Team       &lt;chr&gt; &quot;Boston Celtics&quot;, &quot;Brooklyn Nets&quot;, &quot;New York Knicks&quot;, &quot;Phi…
## $ Conference &lt;chr&gt; &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Ea…
## $ Division   &lt;chr&gt; &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;…
## $ City       &lt;chr&gt; &quot;Boston&quot;, &quot;New York City&quot;, &quot;New York City&quot;, &quot;Philadelphia&quot;…
## $ State      &lt;chr&gt; &quot;Massachusetts&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;Pennsylvania&quot;, &quot;…
## $ Arena      &lt;chr&gt; &quot;TD Garden&quot;, &quot;Barclays Center&quot;, &quot;Madison Square Garden&quot;, &quot;…
## $ Capacity   &lt;dbl&gt; 18624, 17732, 19812, 21600, 19800, 20917, 20562, 20491, 17…
## $ Latitude   &lt;dbl&gt; 42.36630, 40.68265, 40.75056, 39.90111, 43.64333, 41.88056…
## $ Longitude  &lt;dbl&gt; -71.06223, -73.97469, -73.99361, -75.17194, -79.37917, -87…</code></pre>
<p>Great, a clean and tidy table.</p>
</div>
<div id="add-more-information" class="section level3">
<h3>Add more information</h3>
<p>I also wanted to add three-letter team codes, which can be scraped from <a href="https://en.wikipedia.org/wiki/Wikipedia:WikiProject_National_Basketball_Association/National_Basketball_Association_team_abbreviations" target="_blank">another Wikipedia table</a>.</p>
<p>I also wanted to add team colours to later customise the marker pins on the interactive map. These are a little tricky to get in an automated way, so I input them manually with reference to <a href="https://teamcolorcodes.com/nba-team-color-codes/" target="_blank">teamcolorcodes.com</a>. With {leaflet}, the markers can only take a small set of named colours (see <code>?awesomeIcons</code>), whereas the icon can use any CSS-valid colour (like hex codes).</p>
<p>I’ve hidden the code for this below to save space and because it doesn’t introduce anything new.</p>
<details>
<p><summary>Click for the code that creates a data frame of team codes and colours</summary></p>
<pre class="r"><code>nba_abbr_cols &lt;- 
  read_html(
    &quot;https://en.wikipedia.org/wiki/Wikipedia:WikiProject_National_Basketball_Association/National_Basketball_Association_team_abbreviations&quot;
  ) %&gt;% 
  html_nodes(xpath = &quot;/html/body/div[3]/div[3]/div[5]/div[1]/table&quot;) %&gt;%
  html_table(header = TRUE) %&gt;%
  .[[1]] %&gt;% 
  rename(Code = `Abbreviation/Acronym`) %&gt;% 
  mutate(
    # {leaflet} markers take a named colour
    colour_marker = case_when(
      Code == &quot;ATL&quot; ~ &quot;red&quot;,
      Code == &quot;BKN&quot; ~ &quot;black&quot;,
      Code == &quot;BOS&quot; ~ &quot;green&quot;,
      Code == &quot;CHA&quot; ~ &quot;darkblue&quot;,
      Code == &quot;CHI&quot; ~ &quot;red&quot;,
      Code == &quot;CLE&quot; ~ &quot;darkred&quot;,
      Code == &quot;DAL&quot; ~ &quot;blue&quot;,
      Code == &quot;DEN&quot; ~ &quot;darkblue&quot;,
      Code == &quot;DET&quot; ~ &quot;red&quot;,
      Code == &quot;GSW&quot; ~ &quot;blue&quot;,
      Code == &quot;HOU&quot; ~ &quot;red&quot;,
      Code == &quot;IND&quot; ~ &quot;darkblue&quot;,
      Code == &quot;LAC&quot; ~ &quot;red&quot;,
      Code == &quot;LAL&quot; ~ &quot;blue&quot;,
      Code == &quot;MEM&quot; ~ &quot;lightblue&quot;,
      Code == &quot;MIA&quot; ~ &quot;red&quot;,
      Code == &quot;MIL&quot; ~ &quot;darkgreen&quot;,
      Code == &quot;MIN&quot; ~ &quot;darkblue&quot;,
      Code == &quot;NOP&quot; ~ &quot;darkblue&quot;,
      Code == &quot;NYK&quot; ~ &quot;blue&quot;,
      Code == &quot;OKC&quot; ~ &quot;blue&quot;,
      Code == &quot;ORL&quot; ~ &quot;blue&quot;,
      Code == &quot;PHI&quot; ~ &quot;blue&quot;,
      Code == &quot;PHX&quot; ~ &quot;darkblue&quot;,
      Code == &quot;POR&quot; ~ &quot;red&quot;,
      Code == &quot;SAC&quot; ~ &quot;purple&quot;,
      Code == &quot;SAS&quot; ~ &quot;black&quot;,
      Code == &quot;TOR&quot; ~ &quot;red&quot;,
      Code == &quot;UTA&quot; ~ &quot;darkblue&quot;,
      Code == &quot;WAS&quot; ~ &quot;darkblue&quot;
    ),
    # {leaflet} marker icons take hex
    colour_icon = case_when(
      Code == &quot;ATL&quot; ~ &quot;#C1D32F&quot;,
      Code == &quot;BKN&quot; ~ &quot;#FFFFFF&quot;,
      Code == &quot;BOS&quot; ~ &quot;#BA9653&quot;,
      Code == &quot;CHA&quot; ~ &quot;#00788C&quot;,
      Code == &quot;CHI&quot; ~ &quot;#000000&quot;,
      Code == &quot;CLE&quot; ~ &quot;#FDBB30&quot;,
      Code == &quot;DAL&quot; ~ &quot;#B8C4CA&quot;,
      Code == &quot;DEN&quot; ~ &quot;#FEC524&quot;,
      Code == &quot;DET&quot; ~ &quot;#1D42BA&quot;,
      Code == &quot;GSW&quot; ~ &quot;#FFC72C&quot;,
      Code == &quot;HOU&quot; ~ &quot;#000000&quot;,
      Code == &quot;IND&quot; ~ &quot;#FDBB30&quot;,
      Code == &quot;LAC&quot; ~ &quot;#1D428A&quot;,
      Code == &quot;LAL&quot; ~ &quot;#FDB927&quot;,
      Code == &quot;MEM&quot; ~ &quot;#12173F&quot;,
      Code == &quot;MIA&quot; ~ &quot;#F9A01B&quot;,
      Code == &quot;MIL&quot; ~ &quot;#EEE1C6&quot;,
      Code == &quot;MIN&quot; ~ &quot;#9EA2A2&quot;,
      Code == &quot;NOP&quot; ~ &quot;#C8102E&quot;,
      Code == &quot;NYK&quot; ~ &quot;#F58426&quot;,
      Code == &quot;OKC&quot; ~ &quot;#EF3B24&quot;,
      Code == &quot;ORL&quot; ~ &quot;#C4CED4&quot;,
      Code == &quot;PHI&quot; ~ &quot;#ED174C&quot;,
      Code == &quot;PHX&quot; ~ &quot;#E56020&quot;,
      Code == &quot;POR&quot; ~ &quot;#000000&quot;,
      Code == &quot;SAC&quot; ~ &quot;#63727A&quot;,
      Code == &quot;SAS&quot; ~ &quot;#C4CED4&quot;,
      Code == &quot;TOR&quot; ~ &quot;#000000&quot;,
      Code == &quot;UTA&quot; ~ &quot;#F9A01B&quot;,
      Code == &quot;WAS&quot; ~ &quot;#E31837&quot;
    )
  ) %&gt;% 
  as_tibble()</code></pre>
</details>
<pre class="r"><code>sample_n(nba_abbr_cols, 5)</code></pre>
<pre><code>## # A tibble: 5 x 4
##   Code  Franchise              colour_marker colour_icon
##   &lt;chr&gt; &lt;chr&gt;                  &lt;chr&gt;         &lt;chr&gt;      
## 1 IND   Indiana Pacers         darkblue      #FDBB30    
## 2 UTA   Utah Jazz              darkblue      #F9A01B    
## 3 NOP   New Orleans Pelicans   darkblue      #C8102E    
## 4 SAC   Sacramento Kings       purple        #63727A    
## 5 MIN   Minnesota Timberwolves darkblue      #9EA2A2</code></pre>
<p>Now this extra information can be joined to our scraped and wrangled data frame from before.</p>
<pre class="r"><code>nba_table &lt;- nba_wrangle %&gt;% 
  left_join(nba_abbr_cols, by = c(&quot;Team&quot; = &quot;Franchise&quot;)) %&gt;%
  select(Code, everything())

glimpse(nba_table)</code></pre>
<pre><code>## Rows: 30
## Columns: 12
## $ Code          &lt;chr&gt; &quot;BOS&quot;, &quot;BKN&quot;, &quot;NYK&quot;, &quot;PHI&quot;, &quot;TOR&quot;, &quot;CHI&quot;, &quot;CLE&quot;, &quot;DET&quot;,…
## $ Team          &lt;chr&gt; &quot;Boston Celtics&quot;, &quot;Brooklyn Nets&quot;, &quot;New York Knicks&quot;, &quot;…
## $ Conference    &lt;chr&gt; &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, &quot;Eastern&quot;, …
## $ Division      &lt;chr&gt; &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlantic&quot;, &quot;Atlant…
## $ City          &lt;chr&gt; &quot;Boston&quot;, &quot;New York City&quot;, &quot;New York City&quot;, &quot;Philadelph…
## $ State         &lt;chr&gt; &quot;Massachusetts&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;Pennsylvania&quot;…
## $ Arena         &lt;chr&gt; &quot;TD Garden&quot;, &quot;Barclays Center&quot;, &quot;Madison Square Garden&quot;…
## $ Capacity      &lt;dbl&gt; 18624, 17732, 19812, 21600, 19800, 20917, 20562, 20491,…
## $ Latitude      &lt;dbl&gt; 42.36630, 40.68265, 40.75056, 39.90111, 43.64333, 41.88…
## $ Longitude     &lt;dbl&gt; -71.06223, -73.97469, -73.99361, -75.17194, -79.37917, …
## $ colour_marker &lt;chr&gt; &quot;green&quot;, &quot;black&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;red&quot;, &quot;red&quot;, &quot;darkre…
## $ colour_icon   &lt;chr&gt; &quot;#BA9653&quot;, &quot;#FFFFFF&quot;, &quot;#F58426&quot;, &quot;#ED174C&quot;, &quot;#000000&quot;, …</code></pre>
<p>Now we have everything we need to visualise the data and fetch the travel duration times.</p>
</div>
</div>
<div id="map" class="section level2">
<h2>2. Map the locations</h2>
<p>So where are all the arenas?</p>
<p>We can create a simple interactive map with {leaflet} by plotting the <code>Latitude</code> and <code>Longitude</code> columns and creating custom point markers with a basketball icon and each team’s colours, as well as an information box that appears on-click.</p>
<pre class="r"><code>leaflet(nba_table) %&gt;%
  addProviderTiles(providers$Stamen.TonerLite) %&gt;%  # add basemap
  addAwesomeMarkers(  # add markers
    lng = ~Longitude, lat = ~Latitude,  # coordinates
    popup = ~paste0(  # HTML content for popup info
      &quot;&lt;b&gt;&quot;, nba_table$Team, &quot;&lt;/b&gt;&quot;,  # team name
      &quot;&lt;br&gt;&quot;, paste0(nba_table$Arena, &quot;, &quot;, nba_table$City),  # location
      if_else(  # division/conference information
        nba_table$Conference == &quot;Eastern&quot;,
        paste0(&quot;&lt;br&gt;&lt;font color=&#39;#0000FF&#39;&gt;&quot;, nba_table$Division,
               &quot; Division (Eastern Conference)&lt;/font&gt;&quot;),
        paste0(&quot;&lt;br&gt;&lt;font color=&#39;#FF0000&#39;&gt;&quot;, nba_table$Division,
               &quot; Division (Western Conference)&lt;/font&gt;&quot;)
      )
    ),
    icon = awesomeIcons(
      library = &quot;ion&quot;, icon = &quot;ion-ios-basketball&quot;, # add basketball icon
      markerColor = nba_table$colour_marker,  # colour the marker
      iconColor = nba_table$colour_icon  # colour the basketball icon
    )
  ) %&gt;%
  addMeasure()  # add straight-line distance-measuring tool</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[42.366303,40.68265,40.750556,39.901111,43.643333,41.880556,41.496389,42.696944,39.763889,43.043611,33.757222,35.225,25.781389,28.539167,38.898056,39.748611,44.979444,35.463333,45.531667,40.768333,37.768056,34.043056,34.043056,33.445833,38.649167,32.790556,29.750833,35.138333,29.948889,29.426944],[-71.062228,-73.974689,-73.993611,-75.171944,-79.379167,-87.674167,-81.688056,-83.245556,-86.155556,-87.916944,-84.396389,-80.839167,-80.188056,-81.383611,-77.020833,-105.0075,-93.276111,-97.515,-122.666667,-111.901111,-122.3875,-118.267222,-118.267222,-112.071389,-121.518056,-96.810278,-95.362222,-90.050556,-90.081944,-98.4375],{"icon":"ion-ios-basketball","markerColor":["green","black","blue","blue","red","red","darkred","red","darkblue","darkgreen","red","darkblue","red","blue","darkblue","darkblue","darkblue","blue","red","darkblue","blue","red","blue","darkblue","purple","blue","red","lightblue","darkblue","black"],"iconColor":["#BA9653","#FFFFFF","#F58426","#ED174C","#000000","#000000","#FDBB30","#1D42BA","#FDBB30","#EEE1C6","#C1D32F","#00788C","#F9A01B","#C4CED4","#E31837","#FEC524","#9EA2A2","#EF3B24","#000000","#F9A01B","#FFC72C","#1D428A","#FDB927","#E56020","#63727A","#B8C4CA","#000000","#12173F","#C8102E","#C4CED4"],"spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Boston Celtics<\/b><br>TD Garden, Boston<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Brooklyn Nets<\/b><br>Barclays Center, New York City<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>New York Knicks<\/b><br>Madison Square Garden, New York City<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Philadelphia 76ers<\/b><br>Wells Fargo Center, Philadelphia<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Toronto Raptors<\/b><br>Scotiabank Arena, Toronto<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Chicago Bulls<\/b><br>United Center, Chicago<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Cleveland Cavaliers<\/b><br>Rocket Mortgage FieldHouse, Cleveland<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Detroit Pistons<\/b><br>Little Caesars Arena, Detroit<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Indiana Pacers<\/b><br>Bankers Life Fieldhouse, Indianapolis<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Milwaukee Bucks<\/b><br>Fiserv Forum, Milwaukee<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Atlanta Hawks<\/b><br>State Farm Arena, Atlanta<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Charlotte Hornets<\/b><br>Spectrum Center, Charlotte<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Miami Heat<\/b><br>American Airlines Arena, Miami<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Orlando Magic<\/b><br>Amway Center, Orlando<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Washington Wizards<\/b><br>Capital One Arena, Washington<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Denver Nuggets<\/b><br>Ball Arena, Denver<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Minnesota Timberwolves<\/b><br>Target Center, Minneapolis<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Oklahoma City Thunder<\/b><br>Chesapeake Energy Arena, Oklahoma City<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Portland Trail Blazers<\/b><br>Moda Center, Portland<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Utah Jazz<\/b><br>Vivint Smart Home Arena, Salt Lake City<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Golden State Warriors<\/b><br>Chase Center, San Francisco<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Los Angeles Clippers<\/b><br>Staples Center, Los Angeles<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Los Angeles Lakers<\/b><br>Staples Center, Los Angeles<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Phoenix Suns<\/b><br>Talking Stick Resort Arena, Phoenix<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Sacramento Kings<\/b><br>Golden 1 Center, Sacramento<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Dallas Mavericks<\/b><br>American Airlines Center, Dallas<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>Houston Rockets<\/b><br>Toyota Center, Houston<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>Memphis Grizzlies<\/b><br>FedExForum, Memphis<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>New Orleans Pelicans<\/b><br>Smoothie King Center, New Orleans<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>San Antonio Spurs<\/b><br>AT&T Center, San Antonio<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMeasure","args":[{"position":"topright","primaryLengthUnit":"feet","primaryAreaUnit":"acres","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]}],"limits":{"lat":[25.781389,45.531667],"lng":[-122.666667,-71.062228]}},"evals":[],"jsHooks":[]}</script>
<p>You can drag and zoom and click the points.</p>
</div>
<div id="travel" class="section level2">
<h2>3. Get travel duration</h2>
<p>So how far between these locations?</p>
<p><a href="https://github.com/rCarto/osrm" target="_blank">The {osrm} R package</a> from Timothée Giraud, Robin Cura and Matthieu Viry lets you fetch shortest paths and travel times from <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> via the <a href="http://project-osrm.org/" target="_blank">OSRM API</a>. It defaults to driving, but you can select walking and biking too. Since we’re using the demo server for OSRM, we can only fetch duration.</p>
<div id="duration-matrix" class="section level3">
<h3>Duration matrix</h3>
<p>The <code>osrm::osrmTable()</code> function takes a data frame (or spatial object) where the first three columns are an identifier and coordinates. The return object is a list, where the first element is a matrix of durations for each pair of points.</p>
<pre class="r"><code>nba_locs &lt;- select(nba_table, Code, Longitude, Latitude)
nba_dur &lt;- osrmTable(loc = nba_locs)

glimpse(nba_dur)</code></pre>
<pre><code>## List of 3
##  $ durations   : num [1:30, 1:30] 0 277 269 377 649 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:30] &quot;BOS&quot; &quot;BKN&quot; &quot;NYK&quot; &quot;PHI&quot; ...
##   .. ..$ : chr [1:30] &quot;BOS&quot; &quot;BKN&quot; &quot;NYK&quot; &quot;PHI&quot; ...
##  $ sources     :&#39;data.frame&#39;:    30 obs. of  2 variables:
##   ..$ lon: num [1:30] -71.1 -74 -74 -75.2 -79.4 ...
##   ..$ lat: num [1:30] 42.4 40.7 40.7 39.9 43.6 ...
##  $ destinations:&#39;data.frame&#39;:    30 obs. of  2 variables:
##   ..$ lon: num [1:30] -71.1 -74 -74 -75.2 -79.4 ...
##   ..$ lat: num [1:30] 42.4 40.7 40.7 39.9 43.6 ...</code></pre>
</div>
<div id="duration-all-teams" class="section level3">
<h3>Duration: all teams</h3>
<p>Let’s take this matrix and tidy it into a data frame so there’s one row per team-pair. We can also round to the nearest minute and calculate the nearest number of hours.</p>
<pre class="r"><code>nba_dur_all &lt;-
  as.data.frame(nba_dur$durations) %&gt;% 
  rownames_to_column(&quot;Start&quot;) %&gt;% 
  pivot_longer(
    cols = BOS:SAS,
    names_to = &quot;End&quot;,
    values_to = &quot;Duration (mins)&quot;
  ) %&gt;% 
  mutate(
    `Duration (mins)`= janitor::round_half_up(`Duration (mins)`),
    `Duration (hrs)` = janitor::round_half_up(`Duration (mins)` / 60)
  ) %&gt;% 
  arrange(desc(`Duration (mins)`))</code></pre>
<p>Here’s a {DT} interactive table sorted by duration that you can filter. Click the ‘CSV’ button to download the data.</p>
<pre class="r"><code>nba_dur_all %&gt;% 
  datatable(
    filter = &quot;top&quot;,
    extensions = c(&quot;Buttons&quot;,&quot;Scroller&quot;),
    class = &quot;compact&quot;, width = &quot;100%&quot;,
    options = list(
      dom = &quot;Blrtip&quot;,
      scroller = TRUE, scrollY = 300,
      buttons = list(&quot;csv&quot;)
    )
)</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"top","filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"3459\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"58\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","Scroller"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900"],["MIA","POR","GSW","BOS","POR","BOS","SAC","MIA","GSW","MIA","POR","LAC","LAL","ORL","BOS","BOS","SAC","BOS","BKN","GSW","POR","BKN","GSW","NYK","POR","NYK","SAC","GSW","ORL","ORL","PHI","GSW","POR","PHI","LAC","LAL","BKN","BKN","SAC","BKN","GSW","LAC","LAL","NYK","NYK","WAS","SAC","POR","NYK","WAS","POR","CHA","SAC","PHI","CHA","GSW","PHI","PHI","LAC","LAL","MIA","MIA","LAC","LAL","PHX","BOS","SAC","WAS","CHA","SAC","WAS","WAS","LAC","LAL","TOR","GSW","POR","TOR","ATL","POR","POR","NOP","MIA","UTA","TOR","TOR","LAC","LAL","SAC","TOR","PHX","BKN","LAC","LAL","ORL","ORL","ATL","PHX","ATL","SAC","GSW","NYK","LAC","LAL","CHA","CHA","GSW","CLE","PHX","PHI","POR","CLE","UTA","BOS","DET","GSW","DET","POR","PHX","MIA","PHX","WAS","LAC","LAL","CLE","CLE","SAC","CLE","UTA","ORL","PHX","DET","DET","LAC","LAL","POR","HOU","TOR","DET","SAC","SAC","POR","MEM","NOP","GSW","NOP","IND","GSW","POR","IND","UTA","BKN","ATL","ATL","UTA","LAC","LAL","POR","NYK","SAS","UTA","PHI","BOS","SAS","IND","SAC","PHX","MIL","GSW","ORL","DEN","PHX","SAC","MEM","MEM","MIA","CHA","GSW","UTA","WAS","GSW","CHI","POR","CHI","PHX","UTA","CHA","DET","POR","PHX","LAC","LAL","MIL","IND","IND","CLE","POR","DAL","MIL","MIL","DEN","LAC","LAL","SAC","BOS","MIL","LAC","LAL","CHI","CHI","SAC","CHI","MIN","GSW","BOS","HOU","SAC","HOU","HOU","GSW","UTA","TOR","MIN","MIN","LAC","LAL","BKN","SAS","MIN","NYK","SAC","SAS","LAC","LAL","NOP","NOP","ATL","DEN","UTA","MIL","PHX","ORL","DAL","BOS","POR","OKC","MIA","UTA","MIN","NOP","PHX","ATL","DEN","BKN","DEN","NYK","PHI","SAS","CHI","PHX","MEM","MEM","LAC","LAL","DEN","PHI","SAS","TOR","PHX","OKC","BOS","MIN","SAC","DAL","DAL","GSW","SAC","SAS","PHX","SAS","GSW","BKN","IND","HOU","HOU","NYK","POR","MIN","UTA","DEN","CLE","WAS","DET","UTA","WAS","SAS","PHI","HOU","HOU","SAC","NOP","BOS","OKC","DAL","BKN","TOR","ORL","OKC","DAL","GSW","NYK","MIN","DEN","CHA","BOS","MIA","UTA","MIA","HOU","TOR","UTA","MEM","BKN","OKC","TOR","DEN","MIA","MIA","OKC","OKC","NYK","DET","MIL","SAS","DAL","PHI","LAC","LAL","HOU","HOU","UTA","IND","PHX","NOP","SAS","CLE","DAL","TOR","BOS","MIN","WAS","HOU","MIA","DET","PHI","OKC","PHX","MEM","MIA","CHI","DEN","UTA","SAS","ATL","DAL","DAL","LAC","LAL","UTA","MIL","MIA","SAS","MEM","BOS","POR","PHX","ORL","BOS","HOU","DET","BKN","NOP","NOP","NOP","NYK","TOR","DAL","WAS","WAS","OKC","ORL","UTA","TOR","CHI","BKN","HOU","MIA","DAL","MIA","NYK","MIA","CLE","DEN","NOP","DEN","MIL","CLE","SAS","SAS","SAS","OKC","LAC","LAL","UTA","TOR","DAL","OKC","MIL","ORL","ORL","OKC","OKC","LAC","LAL","DET","DEN","MIA","CLE","NOP","PHI","MIN","NOP","SAS","CHA","BKN","MIN","UTA","SAS","MIN","DAL","MIA","NYK","PHI","CHI","DET","MIN","SAS","MIN","DET","ORL","MIN","HOU","MIA","CHA","IND","DAL","DEN","MIN","GSW","PHI","HOU","MIL","CLE","MIA","HOU","POR","DEN","MIN","CHI","ORL","IND","ATL","SAS","BOS","SAS","ORL","ATL","WAS","MIN","BKN","MEM","ORL","MIN","BKN","MEM","NYK","MIL","ORL","BOS","NYK","UTA","DET","NOP","OKC","PHX","HOU","OKC","CHA","WAS","NOP","DAL","DEN","SAC","HOU","ORL","CHI","NOP","MIA","WAS","DEN","OKC","DET","CLE","ORL","OKC","CLE","CLE","IND","HOU","CHA","DEN","HOU","MEM","DEN","DAL","MEM","PHI","CHA","MIL","DAL","CHI","ORL","HOU","NOP","BOS","MIL","MIA","IND","MEM","PHI","MEM","TOR","MIL","DEN","PHX","DAL","ATL","POR","POR","LAC","LAL","TOR","SAS","ATL","IND","DEN","DEN","ORL","LAC","LAL","IND","BOS","SAS","DEN","DEN","CHI","HOU","ORL","TOR","DAL","MIN","MIN","CHI","DAL","PHX","OKC","NOP","CHI","ATL","BKN","PHX","SAS","ATL","NYK","BKN","MIL","BOS","CHA","MIL","NYK","DAL","IND","WAS","MEM","MIN","DEN","MIL","MIL","CHA","OKC","ORL","PHI","MIL","WAS","MIA","MIN","NOP","MEM","ATL","OKC","PHX","DEN","ATL","MIL","ATL","PHI","NOP","IND","BKN","CHI","MIL","WAS","CHI","DAL","NYK","DEN","MEM","ATL","ORL","HOU","CHA","TOR","CHI","DET","OKC","MEM","CHI","DAL","CHA","DET","ATL","BOS","PHI","CHI","ATL","OKC","DET","MIN","CLE","BKN","IND","MIN","SAC","PHX","PHX","IND","NYK","GSW","MEM","CLE","OKC","IND","ATL","CHA","MIA","CHI","DET","POR","UTA","ATL","NOP","CHA","MIN","CHI","CLE","WAS","MEM","SAS","NOP","OKC","UTA","GSW","CHA","DET","CLE","BOS","UTA","PHI","PHX","BKN","IND","CHA","POR","BKN","ATL","DET","CHA","GSW","NYK","WAS","ATL","MIA","DET","UTA","UTA","NYK","LAC","LAL","CHA","MEM","MIL","TOR","NOP","OKC","DEN","ORL","MEM","MIL","PHI","DET","IND","POR","UTA","SAC","SAC","MIN","WAS","IND","CHA","IND","BOS","TOR","HOU","MEM","CHA","PHI","DET","WAS","TOR","WAS","IND","TOR","CHI","TOR","ATL","BKN","IND","ORL","TOR","SAS","MEM","NOP","CHA","CHI","PHI","TOR","NYK","TOR","CHA","CLE","DAL","NOP","UTA","DEN","BKN","BOS","WAS","CLE","CLE","NYK","NOP","ATL","IND","MEM","MEM","OKC","SAS","OKC","HOU","OKC","DAL","MEM","MIL","CLE","PHI","CLE","ATL","ORL","CHI","CHA","WAS","MIN","DET","MIL","SAC","SAC","LAC","LAL","MEM","NOP","LAC","LAL","ATL","MEM","CLE","GSW","GSW","WAS","PHX","PHX","LAC","LAL","NOP","HOU","CHI","CLE","BOS","PHI","MIN","MIL","IND","DET","IND","CLE","CLE","DET","CHI","TOR","MIL","IND","DAL","SAS","DET","TOR","BKN","ATL","CHA","WAS","BKN","BOS","NYK","WAS","DAL","HOU","NYK","BOS","MIA","ORL","DAL","DET","CLE","OKC","CHI","IND","SAS","HOU","WAS","PHI","BKN","PHI","PHI","NYK","SAC","GSW","CHI","MIL","BKN","NYK","BOS","BKN","NYK","PHI","TOR","CHI","CLE","DET","IND","MIL","ATL","CHA","MIA","ORL","WAS","DEN","MIN","OKC","POR","UTA","GSW","LAC","LAC","LAL","LAL","PHX","SAC","DAL","HOU","MEM","NOP","SAS"],["POR","MIA","BOS","GSW","BOS","POR","MIA","SAC","MIA","GSW","ORL","BOS","BOS","POR","LAC","LAL","BOS","SAC","GSW","BKN","BKN","POR","NYK","GSW","NYK","POR","ORL","ORL","SAC","GSW","GSW","PHI","PHI","POR","BKN","BKN","LAC","LAL","BKN","SAC","WAS","NYK","NYK","LAC","LAL","GSW","NYK","WAS","SAC","POR","CHA","POR","PHI","SAC","GSW","CHA","LAC","LAL","PHI","PHI","LAC","LAL","MIA","MIA","BOS","PHX","WAS","SAC","SAC","CHA","LAC","LAL","WAS","WAS","GSW","TOR","TOR","POR","POR","ATL","NOP","POR","UTA","MIA","LAC","LAL","TOR","TOR","TOR","SAC","BKN","PHX","ORL","ORL","LAC","LAL","SAC","NYK","GSW","ATL","ATL","PHX","CHA","CHA","LAC","LAL","CLE","GSW","PHI","PHX","CLE","POR","BOS","UTA","GSW","DET","POR","DET","MIA","PHX","WAS","PHX","CLE","CLE","LAC","LAL","CLE","SAC","ORL","UTA","TOR","LAC","LAL","DET","DET","HOU","POR","PHX","SAC","DET","NOP","MEM","POR","SAC","NOP","GSW","GSW","IND","IND","POR","BKN","UTA","LAC","LAL","NYK","ATL","ATL","SAS","UTA","POR","PHI","UTA","SAS","BOS","SAC","IND","ORL","GSW","MIL","PHX","MIA","CHA","MEM","SAC","GSW","DEN","PHX","MEM","WAS","UTA","CHI","GSW","CHI","POR","DET","CHA","UTA","PHX","MIL","CLE","IND","IND","POR","LAC","LAL","PHX","DAL","POR","LAC","LAL","BOS","MIL","MIL","MIL","DEN","SAC","CHI","CHI","LAC","LAL","CHI","SAC","GSW","MIN","HOU","BOS","HOU","SAC","GSW","HOU","TOR","UTA","LAC","LAL","MIN","MIN","SAS","BKN","SAC","SAS","MIN","NYK","NOP","NOP","LAC","LAL","UTA","ORL","ATL","PHX","MIL","DEN","BOS","DAL","OKC","POR","MIN","NOP","MIA","UTA","ATL","PHX","BKN","DEN","NYK","DEN","SAS","PHI","PHX","CHI","LAC","LAL","MEM","MEM","PHI","DEN","TOR","SAS","MIN","BOS","OKC","PHX","DAL","SAC","GSW","DAL","SAS","SAC","IND","GSW","SAS","HOU","PHX","BKN","NYK","HOU","MIN","POR","CLE","WAS","UTA","DEN","UTA","DET","SAS","WAS","HOU","PHI","TOR","OKC","BOS","NOP","SAC","BKN","DAL","HOU","MIN","GSW","NYK","OKC","DAL","ORL","CHA","DEN","MIA","BOS","HOU","TOR","UTA","MIA","MEM","UTA","OKC","BKN","DEN","TOR","OKC","MIL","NYK","MIA","OKC","SAS","MIA","DET","PHI","DAL","HOU","HOU","LAC","LAL","IND","UTA","NOP","PHX","CLE","SAS","TOR","DAL","MIN","BOS","HOU","WAS","DET","MIA","OKC","PHI","MEM","PHX","CHI","MIA","ATL","SAS","UTA","DEN","LAC","LAL","DAL","DAL","MIL","UTA","SAS","MIA","BOS","MEM","PHX","POR","BOS","ORL","DET","HOU","NOP","BKN","NYK","TOR","NOP","NOP","WAS","OKC","DAL","WAS","TOR","CHI","ORL","UTA","MIA","CLE","BKN","MIA","DAL","MIA","NYK","HOU","NOP","DEN","CLE","SAS","DEN","MIL","LAC","LAL","TOR","SAS","SAS","DAL","OKC","UTA","ORL","ORL","OKC","MIL","LAC","LAL","OKC","OKC","DEN","DET","CLE","MIA","PHI","NOP","NOP","MIN","CHA","SAS","MIN","UTA","MIN","MIN","BKN","DET","PHI","MIN","MIA","SAS","DAL","SAS","CHI","NYK","ORL","DET","HOU","MIN","IND","MIN","MIA","CLE","GSW","CHA","DEN","MIN","MIL","HOU","DAL","HOU","MIA","DEN","POR","PHI","ORL","CHI","SAS","BOS","IND","ATL","ORL","SAS","MIN","MIN","ATL","MEM","BKN","BKN","WAS","ORL","NYK","MEM","BOS","NYK","MIL","ORL","OKC","NOP","DET","UTA","HOU","PHX","CHA","OKC","NOP","WAS","ORL","SAC","DEN","CHI","DAL","HOU","CLE","WAS","MIA","IND","DET","OKC","NOP","CLE","CLE","OKC","ORL","DEN","CHA","HOU","HOU","DEN","DEN","MEM","CHA","PHI","MEM","DAL","DAL","MIL","BOS","PHI","IND","MIL","CHI","NOP","MEM","HOU","MIA","ORL","TOR","MEM","DEN","MIL","DAL","PHX","TOR","LAC","LAL","POR","POR","ATL","ATL","SAS","ORL","LAC","LAL","IND","DEN","DEN","BOS","IND","DEN","CHI","SAS","DEN","ORL","HOU","MIN","MIN","DAL","TOR","DAL","CHI","OKC","PHX","CHI","NOP","BKN","ATL","SAS","PHX","NYK","ATL","MIL","BKN","CHA","BOS","NYK","MIL","IND","DAL","MEM","WAS","DEN","MIN","CHA","OKC","MIL","MIL","WAS","MIL","PHI","ORL","NOP","MEM","MIA","MIN","OKC","ATL","DEN","PHX","MIL","ATL","PHI","ATL","IND","NOP","CHI","BKN","WAS","MIL","NYK","DEN","CHI","DAL","ORL","HOU","MEM","ATL","TOR","CHA","OKC","MEM","CHI","DET","CHA","ATL","CHI","BOS","DAL","DET","CHI","PHI","DET","MIN","ATL","OKC","MIN","IND","BKN","CLE","PHX","SAC","GSW","NYK","IND","PHX","CLE","MEM","IND","OKC","CHI","MIA","CHA","ATL","MIN","UTA","POR","CLE","CHA","NOP","DET","WAS","ATL","CHI","SAS","MEM","OKC","NOP","GSW","UTA","DET","CHA","BOS","CLE","PHX","IND","UTA","CHA","PHI","BKN","GSW","DET","WAS","BKN","NYK","POR","CHA","ATL","MIA","ATL","NYK","LAC","LAL","DET","UTA","UTA","MEM","CHA","TOR","MIL","ORL","DEN","OKC","NOP","MIL","MEM","DET","PHI","MIN","SAC","SAC","UTA","POR","IND","IND","WAS","IND","CHA","TOR","BOS","MEM","HOU","PHI","CHA","WAS","DET","WAS","TOR","TOR","IND","TOR","CHI","IND","TOR","ATL","CHA","BKN","NOP","CHI","SAS","ORL","MEM","TOR","PHI","TOR","NYK","CLE","CHA","NOP","DAL","DEN","UTA","CLE","WAS","BOS","BKN","NYK","CLE","ATL","NOP","MEM","IND","OKC","MEM","OKC","SAS","OKC","HOU","MEM","DAL","CLE","MIL","CLE","PHI","ORL","ATL","MIN","WAS","CHA","CHI","MIL","DET","LAC","LAL","SAC","SAC","NOP","MEM","GSW","GSW","MEM","ATL","WAS","LAC","LAL","CLE","LAC","LAL","PHX","PHX","HOU","NOP","CLE","CHI","PHI","BOS","MIL","MIN","DET","IND","CLE","IND","TOR","CHI","DET","CLE","IND","MIL","SAS","DAL","TOR","DET","WAS","CHA","ATL","BKN","BOS","BKN","WAS","NYK","HOU","DAL","BOS","NYK","ORL","MIA","OKC","CLE","DET","DAL","IND","CHI","HOU","SAS","PHI","WAS","PHI","BKN","NYK","PHI","GSW","SAC","MIL","CHI","NYK","BKN","BOS","BKN","NYK","PHI","TOR","CHI","CLE","DET","IND","MIL","ATL","CHA","MIA","ORL","WAS","DEN","MIN","OKC","POR","UTA","GSW","LAC","LAL","LAC","LAL","PHX","SAC","DAL","HOU","MEM","NOP","SAS"],[3459,3457,3311,3307,3302,3296,3293,3286,3286,3282,3217,3217,3217,3215,3213,3213,3212,3207,3081,3081,3072,3069,3068,3066,3060,3055,3052,3045,3042,3038,3033,3033,3025,3022,2987,2987,2986,2986,2982,2980,2975,2974,2974,2972,2972,2972,2970,2966,2965,2961,2936,2935,2935,2933,2926,2924,2920,2920,2919,2919,2900,2900,2900,2900,2895,2888,2876,2871,2846,2846,2831,2831,2831,2831,2781,2780,2771,2769,2742,2740,2715,2714,2711,2709,2687,2687,2686,2686,2681,2680,2665,2661,2659,2659,2655,2655,2653,2652,2650,2650,2648,2647,2588,2588,2587,2587,2575,2573,2572,2569,2566,2562,2554,2547,2530,2527,2519,2518,2500,2499,2484,2481,2481,2481,2479,2479,2476,2472,2468,2466,2439,2436,2436,2433,2433,2432,2431,2430,2430,2429,2400,2399,2399,2396,2393,2392,2362,2361,2352,2351,2324,2321,2311,2311,2311,2311,2311,2308,2306,2306,2276,2273,2265,2264,2262,2262,2260,2256,2255,2254,2234,2231,2230,2230,2226,2225,2224,2222,2218,2212,2211,2210,2203,2199,2191,2188,2186,2185,2182,2182,2180,2180,2179,2178,2178,2177,2166,2166,2162,2162,2161,2161,2161,2157,2156,2155,2117,2117,2116,2116,2113,2110,2107,2103,2082,2082,2041,2038,2033,2032,2023,2021,2021,2021,2020,2020,2012,2009,2006,2005,2004,2004,1995,1995,1995,1995,1993,1993,1991,1982,1981,1980,1978,1975,1967,1965,1964,1957,1954,1952,1951,1946,1930,1929,1918,1915,1910,1908,1892,1892,1886,1886,1885,1885,1883,1882,1871,1870,1870,1868,1865,1865,1851,1848,1844,1843,1838,1838,1833,1832,1830,1829,1828,1828,1822,1821,1821,1818,1818,1815,1813,1806,1770,1770,1748,1746,1726,1726,1726,1725,1725,1724,1723,1723,1722,1720,1720,1719,1718,1717,1715,1714,1712,1700,1697,1697,1674,1670,1669,1668,1651,1650,1638,1638,1630,1630,1626,1625,1625,1625,1624,1624,1623,1623,1621,1619,1614,1614,1613,1613,1604,1602,1596,1594,1592,1586,1583,1577,1574,1568,1565,1564,1561,1560,1546,1545,1538,1536,1521,1520,1516,1515,1512,1507,1504,1504,1502,1502,1498,1496,1493,1493,1489,1488,1486,1486,1484,1480,1479,1474,1471,1471,1465,1465,1463,1462,1459,1458,1458,1458,1457,1454,1451,1450,1447,1447,1446,1446,1442,1438,1438,1436,1428,1427,1424,1423,1422,1418,1413,1413,1412,1411,1411,1408,1407,1404,1384,1383,1382,1380,1380,1380,1380,1380,1379,1377,1373,1370,1369,1368,1367,1366,1351,1348,1347,1347,1346,1341,1338,1335,1334,1333,1333,1333,1332,1332,1329,1325,1319,1317,1312,1312,1311,1310,1308,1306,1303,1303,1301,1300,1300,1298,1296,1296,1294,1292,1291,1290,1279,1277,1268,1266,1265,1264,1253,1249,1247,1239,1237,1235,1234,1233,1232,1230,1229,1227,1226,1225,1223,1221,1219,1217,1217,1216,1215,1212,1211,1210,1207,1207,1205,1202,1202,1198,1197,1195,1169,1165,1164,1164,1164,1162,1160,1160,1156,1154,1153,1153,1152,1151,1144,1144,1142,1140,1138,1133,1132,1132,1129,1125,1123,1121,1120,1120,1119,1119,1119,1118,1118,1116,1113,1110,1105,1105,1103,1103,1091,1091,1091,1090,1090,1088,1073,1072,1068,1068,1068,1067,1066,1066,1065,1063,1063,1061,1061,1059,1054,1051,1050,1049,1047,1042,1039,1036,1033,1030,1017,1016,1015,1014,1012,1012,1007,1004,996,996,992,992,984,982,977,975,971,970,964,963,961,959,959,955,952,949,948,947,938,938,938,937,935,935,935,932,907,906,903,900,897,895,893,893,890,888,880,879,878,878,878,875,875,874,870,869,869,865,865,865,858,858,856,854,854,852,846,845,844,844,842,841,840,836,835,832,831,830,825,823,822,822,817,808,806,805,804,804,804,802,800,800,799,796,796,793,789,787,785,784,783,779,774,769,768,766,762,761,752,751,746,745,745,742,742,741,736,734,734,733,733,733,732,731,724,724,720,720,720,719,719,719,706,706,700,699,697,696,695,694,691,690,686,685,668,667,667,667,666,661,656,655,652,651,650,649,635,633,629,628,627,625,612,612,609,606,596,595,594,593,591,591,590,589,588,588,587,586,583,582,578,577,573,571,553,552,544,543,535,534,534,533,521,520,518,517,510,510,510,509,505,499,498,493,493,493,490,489,488,486,483,479,461,459,459,451,449,447,436,436,435,435,435,434,430,430,428,428,427,427,427,426,406,406,404,404,391,390,387,385,377,377,373,372,362,360,353,352,345,345,344,342,319,318,296,295,294,289,284,284,282,282,277,276,275,275,271,270,269,267,266,263,230,227,226,223,216,214,208,206,171,170,127,126,118,117,114,113,110,109,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[58,58,55,55,55,55,55,55,55,55,54,54,54,54,54,54,54,53,51,51,51,51,51,51,51,51,51,51,51,51,51,51,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,49,49,49,49,49,49,49,49,49,49,49,49,49,48,48,48,48,48,48,48,48,47,47,47,47,47,47,46,46,46,46,46,46,45,45,45,45,45,45,45,45,45,45,44,44,44,44,44,44,44,44,44,44,44,44,43,43,43,43,43,43,43,43,43,43,43,42,42,42,42,42,42,42,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,41,40,40,40,40,40,40,40,39,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,38,38,38,38,38,38,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,35,35,35,35,35,35,35,35,35,35,34,34,34,34,34,34,34,34,34,34,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,32,32,32,32,32,32,32,32,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,30,30,30,30,30,30,30,30,30,30,30,30,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,28,28,28,28,28,28,28,28,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,26,26,26,26,26,26,26,26,26,26,26,26,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,3,3,3,3,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"compact\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start<\/th>\n      <th>End<\/th>\n      <th>Duration (mins)<\/th>\n      <th>Duration (hrs)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blrtip","scroller":true,"scrollY":300,"buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>So an incredible 58 hours of driving to get from Miami to Portland.</p>
</div>
<div id="duration-by-division" class="section level3">
<h3>Duration: by division</h3>
<p>We can also narrow this down to get only the team-pairs that play in the same division as each other.</p>
<pre class="r"><code>nba_dur_div &lt;- nba_dur_all %&gt;%
  left_join(select(nba_table, Code, Division), by = c(&quot;Start&quot; = &quot;Code&quot;)) %&gt;% 
  left_join(select(nba_table, Code, Division), by = c(&quot;End&quot; = &quot;Code&quot;)) %&gt;% 
  dplyr::filter(Division.x == Division.y, `Duration (mins)` != 0) %&gt;% 
  select(Division = Division.x, everything(), -Division.y) %&gt;% 
  arrange(Division, desc(`Duration (mins)`))</code></pre>
<p>Again, here’s an interactive table that you can use to explore the data. Note that it’s ordered by Division and then duration in minutes. I’ve hidden the code because it’s the same as for the table above.</p>
<details>
<p><summary>Click for the {DT} code</summary></p>
<pre class="r"><code>nba_dur_div %&gt;% 
  datatable(
    filter = &quot;top&quot;,
    extensions = c(&quot;Buttons&quot;,&quot;Scroller&quot;),
    rownames = FALSE,
    class = &quot;compact&quot;, width = &quot;100%&quot;,
    options = list(
      dom = &quot;Blrtip&quot;,
      scroller = TRUE, scrollY = 300,
      buttons = list(&quot;csv&quot;)
    )
)</code></pre>
</details>
<div id="htmlwidget-3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"18\" data-max=\"1967\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"33\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","Scroller"],"data":[["Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest"],["BOS","TOR","BKN","TOR","PHI","TOR","NYK","TOR","BOS","PHI","BKN","BOS","NYK","BOS","BKN","PHI","PHI","NYK","BKN","NYK","MIL","CLE","DET","MIL","CHI","CLE","IND","DET","IND","CLE","DET","CHI","MIL","IND","DET","CLE","CHI","IND","CHI","MIL","POR","OKC","POR","MIN","MIN","UTA","POR","DEN","UTA","OKC","MIN","DEN","OKC","MIN","POR","UTA","OKC","DEN","UTA","DEN","SAC","PHX","PHX","GSW","SAC","SAC","LAC","LAL","LAC","LAL","GSW","GSW","PHX","PHX","LAC","LAL","SAC","GSW","MIA","WAS","ORL","WAS","CHA","MIA","ATL","WAS","ATL","MIA","ORL","CHA","ATL","ORL","CHA","WAS","ATL","CHA","MIA","ORL","MEM","SAS","HOU","MEM","SAS","NOP","DAL","NOP","DAL","MEM","MEM","NOP","NOP","HOU","DAL","SAS","DAL","HOU","SAS","HOU"],["TOR","BOS","TOR","BKN","TOR","PHI","TOR","NYK","PHI","BOS","BOS","BKN","BOS","NYK","PHI","BKN","NYK","PHI","NYK","BKN","CLE","MIL","MIL","DET","CLE","CHI","DET","IND","CLE","IND","CHI","DET","IND","MIL","CLE","DET","IND","CHI","MIL","CHI","OKC","POR","MIN","POR","UTA","MIN","DEN","POR","OKC","UTA","DEN","MIN","MIN","OKC","UTA","POR","DEN","OKC","DEN","UTA","PHX","SAC","GSW","PHX","LAC","LAL","SAC","SAC","GSW","GSW","LAC","LAL","LAC","LAL","PHX","PHX","GSW","SAC","WAS","MIA","WAS","ORL","MIA","CHA","WAS","ATL","MIA","ATL","CHA","ORL","ORL","ATL","WAS","CHA","CHA","ATL","ORL","MIA","SAS","MEM","MEM","HOU","NOP","SAS","NOP","DAL","MEM","DAL","NOP","MEM","HOU","NOP","SAS","DAL","HOU","DAL","HOU","SAS"],[650,649,593,590,583,582,578,577,377,377,277,276,269,267,127,126,118,117,18,18,490,489,449,447,387,385,362,360,353,352,345,344,319,318,227,226,216,214,110,109,1967,1965,1821,1818,1347,1346,1292,1291,1219,1216,964,963,844,841,800,799,696,695,544,543,831,830,825,822,436,436,435,435,430,430,427,427,406,406,404,404,114,113,1165,1164,952,947,804,804,734,731,724,724,591,587,483,479,459,459,284,282,266,263,783,779,635,633,589,588,553,552,493,493,435,434,391,390,296,295,271,270,208,206],[11,11,10,10,10,10,10,10,6,6,5,5,4,4,2,2,2,2,0,0,8,8,7,7,6,6,6,6,6,6,6,6,5,5,4,4,4,4,2,2,33,33,30,30,22,22,22,22,20,20,16,16,14,14,13,13,12,12,9,9,14,14,14,14,7,7,7,7,7,7,7,7,7,7,7,7,2,2,19,19,16,16,13,13,12,12,12,12,10,10,8,8,8,8,5,5,4,4,13,13,11,11,10,10,9,9,8,8,7,7,7,7,5,5,5,5,3,3]],"container":"<table class=\"compact\">\n  <thead>\n    <tr>\n      <th>Division<\/th>\n      <th>Start<\/th>\n      <th>End<\/th>\n      <th>Duration (mins)<\/th>\n      <th>Duration (hrs)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blrtip","scroller":true,"scrollY":300,"buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>This time we can see that there’s a maximum of 33 hours of driving required between two teams in the same division: Portland to Oklahoma City.</p>
</div>
<div id="a-quick-diversion-routing" class="section level3">
<h3>A quick diversion: routing</h3>
<p>We know from using <code>osrm::osrmTable()</code> that Miami to Portland has the longest travel duration. What’s the route?</p>
<p>Fortunately, {osrm} has the function <code>osrmRoute()</code> for fetching the routes between a pair of points.</p>
<p>We can grab a vector of coordinates for each team from our <code>nba_table</code> object and set these as our origin (<code>src</code>) and destination (<code>dst</code>) in <code>osrm::osrmRoute()</code>. The return object is a ‘linestring’ object that contains detail on the coordinates and coordinate system for the route.</p>
<pre class="r"><code># Function to extract latlong vectors for teams
get_ll &lt;- function(data, team_code) {
  team_data &lt;- dplyr::filter(data, Code == team_code)
  lng &lt;- pull(team_data, Longitude)
  lat &lt;- pull(team_data, Latitude)
  lnglat &lt;- c(lng, lat)
  return(lnglat)
}

# Get route between latlong pairs
route &lt;- osrmRoute(
  src = get_ll(nba_table, &quot;MIA&quot;),
  dst = get_ll(nba_table, &quot;POR&quot;),
  returnclass = &quot;sf&quot;
)

route</code></pre>
<pre><code>## Simple feature collection with 1 feature and 4 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: -122.6658 ymin: 25.78202 xmax: -80.15664 ymax: 45.8407
## CRS:            EPSG:4326
##         src dst duration distance                       geometry
## src_dst src dst 3459.378  5245.24 LINESTRING (-80.18809 25.78...</code></pre>
<p>Now we can set up the same type of {leaflet} map as earlier, but we’ll include only Portland and OKC. I’ve hidden the map definition because it’s almost the same as before.</p>
<details>
<p><summary>Click for the {leaflet} map definition</summary></p>
<pre class="r"><code>mia_por &lt;- nba_table %&gt;%
  dplyr::filter(Code %in% c(&quot;MIA&quot;, &quot;POR&quot;))

mia_por_map &lt;- 
  leaflet(mia_por) %&gt;%
  addProviderTiles(providers$Stamen.TonerLite) %&gt;%  # add basemap
  addAwesomeMarkers(  # add markers
    lng = ~Longitude, lat = ~Latitude,  # coordinates
    popup = ~paste0(  # HTML content for popup info
      &quot;&lt;b&gt;&quot;, mia_por$Team, &quot;&lt;/b&gt;&quot;,  # team name
      &quot;&lt;br&gt;&quot;, paste0(mia_por$Arena, &quot;, &quot;, mia_por$City),  # location
      if_else(  # division/conference information
        mia_por$Conference == &quot;Eastern&quot;,
        paste0(&quot;&lt;br&gt;&lt;font color=&#39;#0000FF&#39;&gt;&quot;, mia_por$Division,
               &quot; Division (Eastern Conference)&lt;/font&gt;&quot;),
        paste0(&quot;&lt;br&gt;&lt;font color=&#39;#FF0000&#39;&gt;&quot;, mia_por$Division,
               &quot; Division (Western Conference)&lt;/font&gt;&quot;)
      )
    ),
    icon = awesomeIcons(
      library = &quot;ion&quot;, icon = &quot;ion-ios-basketball&quot;, # add basketball icon
      markerColor = mia_por$colour_marker,  # colour the marker
      iconColor = mia_por$colour_icon  # colour the basketball icon
    )
  ) %&gt;%
  addMeasure()  # add straight-line distance-measuring tool</code></pre>
</details>
<p>And to that map we can add the line that defines the route</p>
<pre class="r"><code>mia_por_map %&gt;% addPolylines(data = st_geometry(route))</code></pre>
<div id="htmlwidget-4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[25.781389,45.531667],[-80.188056,-122.666667],{"icon":"ion-ios-basketball","markerColor":["red","red"],"iconColor":["#F9A01B","#000000"],"spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Miami Heat<\/b><br>American Airlines Arena, Miami<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Portland Trail Blazers<\/b><br>Moda Center, Portland<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMeasure","args":[{"position":"topright","primaryLengthUnit":"feet","primaryAreaUnit":"acres","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]},{"method":"addPolylines","args":[[[[{"lng":[-80.18809,-80.15664,-80.43246,-80.80051,-81.45592,-82.08622,-82.70677,-83.29423,-83.74662,-83.73302,-84.91608,-85.01869,-85.72196,-86.81403,-87.85196,-88.64716,-88.99536,-88.99694,-90.584,-94.46696,-94.51135,-94.78893,-94.80646,-95.46442,-95.78158,-96.75573,-98.40494,-99.21757,-100.95037,-102.15788,-103.61264,-105.20119,-106.51217,-107.19712,-109.91473,-111.06433,-111.44079,-111.99232,-112.13403,-112.82258,-113.51926,-114.2973,-114.95422,-115.48341,-116.18983,-116.59099,-117.37576,-117.80644,-118.04133,-118.47119,-119.66867,-121.16033,-121.5421,-122.66578],"lat":[25.78202,26.94138,27.45981,27.57217,28.48752,28.85308,30.21563,30.77485,31.92969,32.83271,34.38313,34.85604,35.05902,36.30471,36.95765,37.04675,37.60454,38.35609,38.79809,39.04859,39.30829,39.38458,39.85496,40.27067,40.68919,40.82044,40.82356,40.67242,41.13506,41.02736,41.22158,41.09539,41.75372,41.78952,41.54375,41.24861,40.97124,41.15887,41.67591,41.99049,42.57154,42.57755,42.93729,42.95929,43.56317,43.60589,44.5181,44.74937,45.30123,45.59167,45.8407,45.59974,45.71277,45.53167]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":false,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[25.781389,45.8407],"lng":[-122.666667,-80.15664]}},"evals":[],"jsHooks":[]}</script>
<p>That’s a long way.</p>
</div>
</div>
<div id="viz" class="section level2">
<h2>4. Make a heatmap</h2>
<p>A quick way to visualise the data is to create a heatmap, where we take a matrix of teams in each division and colour by duration. Here, lighter colours indicate greater travel duration.</p>
<p>The plot is interactive; you can hover over squares in each facet to see specific information about that pair, including the exact duration value.</p>
<pre class="r"><code>p &lt;- nba_dur_div %&gt;% 
  ggplot(aes(Start, End)) +
  geom_tile(aes(fill = `Duration (hrs)`)) +
  xlab(&quot;&quot;) + ylab(&quot;&quot;) + 
  facet_wrap(~Division, scales = &quot;free&quot;)

ggplotly(p)</code></pre>
<div id="htmlwidget-5" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"data":[{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.454545454545455,0,0.181818181818182,0.909090909090909],[0.454545454545455,null,0.363636363636364,0.545454545454545,1],[0,0.363636363636364,null,0.181818181818182,0.909090909090909],[0.181818181818182,0.545454545454545,0.181818181818182,null,0.909090909090909],[0.909090909090909,1,0.909090909090909,0.909090909090909,null]],"text":[[null,"Duration (hrs):  5<br />Start: BOS<br />End: BKN","Duration (hrs):  0<br />Start: NYK<br />End: BKN","Duration (hrs):  2<br />Start: PHI<br />End: BKN","Duration (hrs): 10<br />Start: TOR<br />End: BKN"],["Duration (hrs):  5<br />Start: BKN<br />End: BOS",null,"Duration (hrs):  4<br />Start: NYK<br />End: BOS","Duration (hrs):  6<br />Start: PHI<br />End: BOS","Duration (hrs): 11<br />Start: TOR<br />End: BOS"],["Duration (hrs):  0<br />Start: BKN<br />End: NYK","Duration (hrs):  4<br />Start: BOS<br />End: NYK",null,"Duration (hrs):  2<br />Start: PHI<br />End: NYK","Duration (hrs): 10<br />Start: TOR<br />End: NYK"],["Duration (hrs):  2<br />Start: BKN<br />End: PHI","Duration (hrs):  6<br />Start: BOS<br />End: PHI","Duration (hrs):  2<br />Start: NYK<br />End: PHI",null,"Duration (hrs): 10<br />Start: TOR<br />End: PHI"],["Duration (hrs): 10<br />Start: BKN<br />End: TOR","Duration (hrs): 11<br />Start: BOS<br />End: TOR","Duration (hrs): 10<br />Start: NYK<br />End: TOR","Duration (hrs): 10<br />Start: PHI<br />End: TOR",null]],"colorscale":[[0,"#132B43"],[0.181818181818182,"#17324D"],[0.363636363636364,"#1A3956"],[0.454545454545455,"#1C3D5B"],[0.545454545454545,"#1E4160"],[0.909090909090909,"#265075"],[1,"#28547A"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.666666666666667,0.666666666666667,0.333333333333333,0],[0.666666666666667,null,0.333333333333333,0.666666666666667,1],[0.666666666666667,0.333333333333333,null,0.666666666666667,0.833333333333333],[0.333333333333333,0.666666666666667,0.666666666666667,null,0.5],[0,1,0.833333333333333,0.5,null]],"text":[[null,"Duration (hrs):  6<br />Start: CLE<br />End: CHI","Duration (hrs):  6<br />Start: DET<br />End: CHI","Duration (hrs):  4<br />Start: IND<br />End: CHI","Duration (hrs):  2<br />Start: MIL<br />End: CHI"],["Duration (hrs):  6<br />Start: CHI<br />End: CLE",null,"Duration (hrs):  4<br />Start: DET<br />End: CLE","Duration (hrs):  6<br />Start: IND<br />End: CLE","Duration (hrs):  8<br />Start: MIL<br />End: CLE"],["Duration (hrs):  6<br />Start: CHI<br />End: DET","Duration (hrs):  4<br />Start: CLE<br />End: DET",null,"Duration (hrs):  6<br />Start: IND<br />End: DET","Duration (hrs):  7<br />Start: MIL<br />End: DET"],["Duration (hrs):  4<br />Start: CHI<br />End: IND","Duration (hrs):  6<br />Start: CLE<br />End: IND","Duration (hrs):  6<br />Start: DET<br />End: IND",null,"Duration (hrs):  5<br />Start: MIL<br />End: IND"],["Duration (hrs):  2<br />Start: CHI<br />End: MIL","Duration (hrs):  8<br />Start: CLE<br />End: MIL","Duration (hrs):  7<br />Start: DET<br />End: MIL","Duration (hrs):  5<br />Start: IND<br />End: MIL",null]],"colorscale":[[0,"#17324D"],[0.333333333333333,"#1A3956"],[0.5,"#1C3D5B"],[0.666666666666667,"#1E4160"],[0.833333333333333,"#204566"],[1,"#22486B"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.291666666666667,0.125,0.541666666666667,0],[0.291666666666667,null,0.208333333333333,0.875,0.541666666666667],[0.125,0.208333333333333,null,1,0.458333333333333],[0.541666666666667,0.875,1,null,0.166666666666667],[0,0.541666666666667,0.458333333333333,0.166666666666667,null]],"text":[[null,"Duration (hrs): 16<br />Start: MIN<br />End: DEN","Duration (hrs): 12<br />Start: OKC<br />End: DEN","Duration (hrs): 22<br />Start: POR<br />End: DEN","Duration (hrs):  9<br />Start: UTA<br />End: DEN"],["Duration (hrs): 16<br />Start: DEN<br />End: MIN",null,"Duration (hrs): 14<br />Start: OKC<br />End: MIN","Duration (hrs): 30<br />Start: POR<br />End: MIN","Duration (hrs): 22<br />Start: UTA<br />End: MIN"],["Duration (hrs): 12<br />Start: DEN<br />End: OKC","Duration (hrs): 14<br />Start: MIN<br />End: OKC",null,"Duration (hrs): 33<br />Start: POR<br />End: OKC","Duration (hrs): 20<br />Start: UTA<br />End: OKC"],["Duration (hrs): 22<br />Start: DEN<br />End: POR","Duration (hrs): 30<br />Start: MIN<br />End: POR","Duration (hrs): 33<br />Start: OKC<br />End: POR",null,"Duration (hrs): 13<br />Start: UTA<br />End: POR"],["Duration (hrs):  9<br />Start: DEN<br />End: UTA","Duration (hrs): 22<br />Start: MIN<br />End: UTA","Duration (hrs): 20<br />Start: OKC<br />End: UTA","Duration (hrs): 13<br />Start: POR<br />End: UTA",null]],"colorscale":[[0,"#244C70"],[0.125,"#2A5880"],[0.166666666666667,"#2C5C85"],[0.208333333333333,"#2E608A"],[0.291666666666667,"#326895"],[0.458333333333333,"#3A79AB"],[0.541666666666667,"#3E81B7"],[0.875,"#4FA4E5"],[1,"#56B1F7"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x3","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.416666666666667,0.416666666666667,1,0],[0.416666666666667,null,null,0.416666666666667,0.416666666666667],[0.416666666666667,null,null,0.416666666666667,0.416666666666667],[1,0.416666666666667,0.416666666666667,null,1],[0,0.416666666666667,0.416666666666667,1,null]],"text":[[null,"Duration (hrs):  7<br />Start: LAC<br />End: GSW","Duration (hrs):  7<br />Start: LAL<br />End: GSW","Duration (hrs): 14<br />Start: PHX<br />End: GSW","Duration (hrs):  2<br />Start: SAC<br />End: GSW"],["Duration (hrs):  7<br />Start: GSW<br />End: LAC",null,null,"Duration (hrs):  7<br />Start: PHX<br />End: LAC","Duration (hrs):  7<br />Start: SAC<br />End: LAC"],["Duration (hrs):  7<br />Start: GSW<br />End: LAL",null,null,"Duration (hrs):  7<br />Start: PHX<br />End: LAL","Duration (hrs):  7<br />Start: SAC<br />End: LAL"],["Duration (hrs): 14<br />Start: GSW<br />End: PHX","Duration (hrs):  7<br />Start: LAC<br />End: PHX","Duration (hrs):  7<br />Start: LAL<br />End: PHX",null,"Duration (hrs): 14<br />Start: SAC<br />End: PHX"],["Duration (hrs):  2<br />Start: GSW<br />End: SAC","Duration (hrs):  7<br />Start: LAC<br />End: SAC","Duration (hrs):  7<br />Start: LAL<br />End: SAC","Duration (hrs): 14<br />Start: PHX<br />End: SAC",null]],"colorscale":[[0,"#17324D"],[0.416666666666667,"#204566"],[1,"#2E608A"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x4","yaxis":"y4","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.0666666666666667,0.533333333333333,0.266666666666667,0.533333333333333],[0.0666666666666667,null,0.6,0.4,0.266666666666667],[0.533333333333333,0.6,null,0,1],[0.266666666666667,0.4,0,null,0.8],[0.533333333333333,0.266666666666667,1,0.8,null]],"text":[[null,"Duration (hrs):  5<br />Start: CHA<br />End: ATL","Duration (hrs): 12<br />Start: MIA<br />End: ATL","Duration (hrs):  8<br />Start: ORL<br />End: ATL","Duration (hrs): 12<br />Start: WAS<br />End: ATL"],["Duration (hrs):  5<br />Start: ATL<br />End: CHA",null,"Duration (hrs): 13<br />Start: MIA<br />End: CHA","Duration (hrs): 10<br />Start: ORL<br />End: CHA","Duration (hrs):  8<br />Start: WAS<br />End: CHA"],["Duration (hrs): 12<br />Start: ATL<br />End: MIA","Duration (hrs): 13<br />Start: CHA<br />End: MIA",null,"Duration (hrs):  4<br />Start: ORL<br />End: MIA","Duration (hrs): 19<br />Start: WAS<br />End: MIA"],["Duration (hrs):  8<br />Start: ATL<br />End: ORL","Duration (hrs): 10<br />Start: CHA<br />End: ORL","Duration (hrs):  4<br />Start: MIA<br />End: ORL",null,"Duration (hrs): 16<br />Start: WAS<br />End: ORL"],["Duration (hrs): 12<br />Start: ATL<br />End: WAS","Duration (hrs):  8<br />Start: CHA<br />End: WAS","Duration (hrs): 19<br />Start: MIA<br />End: WAS","Duration (hrs): 16<br />Start: ORL<br />End: WAS",null]],"colorscale":[[0,"#1A3956"],[0.0666666666666667,"#1C3D5B"],[0.266666666666667,"#22486B"],[0.4,"#265075"],[0.533333333333333,"#2A5880"],[0.6,"#2C5C85"],[0.8,"#326895"],[1,"#3874A6"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x5","yaxis":"y5","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.2,0.5,0.6,0.2],[0.2,null,0.8,0.4,0],[0.5,0.8,null,0.4,1],[0.6,0.4,0.4,null,0.7],[0.2,0,1,0.7,null]],"text":[[null,"Duration (hrs):  5<br />Start: HOU<br />End: DAL","Duration (hrs):  8<br />Start: MEM<br />End: DAL","Duration (hrs):  9<br />Start: NOP<br />End: DAL","Duration (hrs):  5<br />Start: SAS<br />End: DAL"],["Duration (hrs):  5<br />Start: DAL<br />End: HOU",null,"Duration (hrs): 11<br />Start: MEM<br />End: HOU","Duration (hrs):  7<br />Start: NOP<br />End: HOU","Duration (hrs):  3<br />Start: SAS<br />End: HOU"],["Duration (hrs):  8<br />Start: DAL<br />End: MEM","Duration (hrs): 11<br />Start: HOU<br />End: MEM",null,"Duration (hrs):  7<br />Start: NOP<br />End: MEM","Duration (hrs): 13<br />Start: SAS<br />End: MEM"],["Duration (hrs):  9<br />Start: DAL<br />End: NOP","Duration (hrs):  7<br />Start: HOU<br />End: NOP","Duration (hrs):  7<br />Start: MEM<br />End: NOP",null,"Duration (hrs): 10<br />Start: SAS<br />End: NOP"],["Duration (hrs):  5<br />Start: DAL<br />End: SAS","Duration (hrs):  3<br />Start: HOU<br />End: SAS","Duration (hrs): 13<br />Start: MEM<br />End: SAS","Duration (hrs): 10<br />Start: NOP<br />End: SAS",null]],"colorscale":[[0,"#183652"],[0.2,"#1C3D5B"],[0.4,"#204566"],[0.5,"#22486B"],[0.6,"#244C70"],[0.7,"#265075"],[0.8,"#28547A"],[1,"#2C5C85"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x6","yaxis":"y6","hoverinfo":"text","frame":null},{"x":[1],"y":[1],"name":"99_ae980eee989ee52e07e24cf18eecb278","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#132B43"],[0.00334448160535117,"#132B44"],[0.00668896321070234,"#132C44"],[0.0100334448160535,"#142C45"],[0.0133779264214047,"#142D45"],[0.0167224080267559,"#142D46"],[0.020066889632107,"#142D46"],[0.0234113712374582,"#142E47"],[0.0267558528428094,"#152E47"],[0.0301003344481605,"#152F48"],[0.0334448160535117,"#152F48"],[0.0367892976588629,"#152F49"],[0.040133779264214,"#153049"],[0.0434782608695652,"#16304A"],[0.0468227424749164,"#16304A"],[0.0501672240802676,"#16314B"],[0.0535117056856187,"#16314B"],[0.0568561872909699,"#16324C"],[0.0602006688963211,"#17324D"],[0.0635451505016722,"#17324D"],[0.0668896321070234,"#17334E"],[0.0702341137123746,"#17334E"],[0.0735785953177257,"#17344F"],[0.0769230769230769,"#18344F"],[0.0802675585284281,"#183450"],[0.0836120401337793,"#183550"],[0.0869565217391304,"#183551"],[0.0903010033444816,"#183651"],[0.0936454849498328,"#193652"],[0.0969899665551839,"#193652"],[0.100334448160535,"#193753"],[0.103678929765886,"#193754"],[0.107023411371237,"#193854"],[0.110367892976589,"#1A3855"],[0.11371237458194,"#1A3955"],[0.117056856187291,"#1A3956"],[0.120401337792642,"#1A3956"],[0.123745819397993,"#1A3A57"],[0.127090301003344,"#1B3A57"],[0.130434782608696,"#1B3B58"],[0.133779264214047,"#1B3B59"],[0.137123745819398,"#1B3B59"],[0.140468227424749,"#1C3C5A"],[0.1438127090301,"#1C3C5A"],[0.147157190635451,"#1C3D5B"],[0.150501672240803,"#1C3D5B"],[0.153846153846154,"#1C3D5C"],[0.157190635451505,"#1D3E5C"],[0.160535117056856,"#1D3E5D"],[0.163879598662207,"#1D3F5D"],[0.167224080267559,"#1D3F5E"],[0.17056856187291,"#1D3F5F"],[0.173913043478261,"#1E405F"],[0.177257525083612,"#1E4060"],[0.180602006688963,"#1E4160"],[0.183946488294314,"#1E4161"],[0.187290969899666,"#1E4261"],[0.190635451505017,"#1F4262"],[0.193979933110368,"#1F4263"],[0.197324414715719,"#1F4363"],[0.20066889632107,"#1F4364"],[0.204013377926421,"#1F4464"],[0.207357859531773,"#204465"],[0.210702341137124,"#204465"],[0.214046822742475,"#204566"],[0.217391304347826,"#204566"],[0.220735785953177,"#214667"],[0.224080267558528,"#214668"],[0.22742474916388,"#214768"],[0.230769230769231,"#214769"],[0.234113712374582,"#214769"],[0.237458193979933,"#22486A"],[0.240802675585284,"#22486A"],[0.244147157190635,"#22496B"],[0.247491638795987,"#22496C"],[0.250836120401338,"#224A6C"],[0.254180602006689,"#234A6D"],[0.25752508361204,"#234A6D"],[0.260869565217391,"#234B6E"],[0.264214046822742,"#234B6E"],[0.267558528428094,"#244C6F"],[0.270903010033445,"#244C70"],[0.274247491638796,"#244C70"],[0.277591973244147,"#244D71"],[0.280936454849498,"#244D71"],[0.28428093645485,"#254E72"],[0.287625418060201,"#254E72"],[0.290969899665552,"#254F73"],[0.294314381270903,"#254F74"],[0.297658862876254,"#254F74"],[0.301003344481605,"#265075"],[0.304347826086956,"#265075"],[0.307692307692308,"#265176"],[0.311036789297659,"#265176"],[0.31438127090301,"#275277"],[0.317725752508361,"#275278"],[0.321070234113712,"#275278"],[0.324414715719064,"#275379"],[0.327759197324415,"#275379"],[0.331103678929766,"#28547A"],[0.334448160535117,"#28547B"],[0.337792642140468,"#28557B"],[0.341137123745819,"#28557C"],[0.344481605351171,"#28567C"],[0.347826086956522,"#29567D"],[0.351170568561873,"#29567D"],[0.354515050167224,"#29577E"],[0.357859531772575,"#29577F"],[0.361204013377926,"#2A587F"],[0.364548494983278,"#2A5880"],[0.367892976588629,"#2A5980"],[0.37123745819398,"#2A5981"],[0.374581939799331,"#2A5982"],[0.377926421404682,"#2B5A82"],[0.381270903010033,"#2B5A83"],[0.384615384615385,"#2B5B83"],[0.387959866220736,"#2B5B84"],[0.391304347826087,"#2C5C85"],[0.394648829431438,"#2C5C85"],[0.397993311036789,"#2C5D86"],[0.40133779264214,"#2C5D86"],[0.404682274247492,"#2C5D87"],[0.408026755852843,"#2D5E87"],[0.411371237458194,"#2D5E88"],[0.414715719063545,"#2D5F89"],[0.418060200668896,"#2D5F89"],[0.421404682274247,"#2E608A"],[0.424749163879599,"#2E608A"],[0.42809364548495,"#2E618B"],[0.431438127090301,"#2E618C"],[0.434782608695652,"#2E618C"],[0.438127090301003,"#2F628D"],[0.441471571906354,"#2F628D"],[0.444816053511706,"#2F638E"],[0.448160535117057,"#2F638F"],[0.451505016722408,"#30648F"],[0.454849498327759,"#306490"],[0.45819397993311,"#306590"],[0.461538461538462,"#306591"],[0.464882943143813,"#306592"],[0.468227424749164,"#316692"],[0.471571906354515,"#316693"],[0.474916387959866,"#316793"],[0.478260869565217,"#316794"],[0.481605351170569,"#326895"],[0.48494983277592,"#326895"],[0.488294314381271,"#326996"],[0.491638795986622,"#326996"],[0.494983277591973,"#326997"],[0.498327759197324,"#336A98"],[0.501672240802676,"#336A98"],[0.505016722408027,"#336B99"],[0.508361204013378,"#336B99"],[0.511705685618729,"#346C9A"],[0.51505016722408,"#346C9B"],[0.518394648829431,"#346D9B"],[0.521739130434783,"#346D9C"],[0.525083612040134,"#346E9D"],[0.528428093645485,"#356E9D"],[0.531772575250836,"#356E9E"],[0.535117056856187,"#356F9E"],[0.538461538461538,"#356F9F"],[0.54180602006689,"#3670A0"],[0.545150501672241,"#3670A0"],[0.548494983277592,"#3671A1"],[0.551839464882943,"#3671A1"],[0.555183946488294,"#3772A2"],[0.558528428093645,"#3772A3"],[0.561872909698997,"#3773A3"],[0.565217391304348,"#3773A4"],[0.568561872909699,"#3773A4"],[0.57190635451505,"#3874A5"],[0.575250836120401,"#3874A6"],[0.578595317725752,"#3875A6"],[0.581939799331104,"#3875A7"],[0.585284280936455,"#3976A8"],[0.588628762541806,"#3976A8"],[0.591973244147157,"#3977A9"],[0.595317725752508,"#3977A9"],[0.59866220735786,"#3978AA"],[0.602006688963211,"#3A78AB"],[0.605351170568562,"#3A79AB"],[0.608695652173913,"#3A79AC"],[0.612040133779264,"#3A79AC"],[0.615384615384615,"#3B7AAD"],[0.618729096989967,"#3B7AAE"],[0.622073578595318,"#3B7BAE"],[0.625418060200669,"#3B7BAF"],[0.62876254180602,"#3C7CB0"],[0.632107023411371,"#3C7CB0"],[0.635451505016722,"#3C7DB1"],[0.638795986622073,"#3C7DB1"],[0.642140468227425,"#3C7EB2"],[0.645484949832776,"#3D7EB3"],[0.648829431438127,"#3D7FB3"],[0.652173913043478,"#3D7FB4"],[0.655518394648829,"#3D7FB5"],[0.658862876254181,"#3E80B5"],[0.662207357859532,"#3E80B6"],[0.665551839464883,"#3E81B6"],[0.668896321070234,"#3E81B7"],[0.672240802675585,"#3F82B8"],[0.675585284280936,"#3F82B8"],[0.678929765886288,"#3F83B9"],[0.682274247491639,"#3F83BA"],[0.68561872909699,"#4084BA"],[0.688963210702341,"#4084BB"],[0.692307692307692,"#4085BB"],[0.695652173913043,"#4085BC"],[0.698996655518395,"#4086BD"],[0.702341137123746,"#4186BD"],[0.705685618729097,"#4186BE"],[0.709030100334448,"#4187BF"],[0.712374581939799,"#4187BF"],[0.71571906354515,"#4288C0"],[0.719063545150502,"#4288C1"],[0.722408026755853,"#4289C1"],[0.725752508361204,"#4289C2"],[0.729096989966555,"#438AC2"],[0.732441471571906,"#438AC3"],[0.735785953177258,"#438BC4"],[0.739130434782609,"#438BC4"],[0.74247491638796,"#438CC5"],[0.745819397993311,"#448CC6"],[0.749163879598662,"#448DC6"],[0.752508361204013,"#448DC7"],[0.755852842809364,"#448EC8"],[0.759197324414716,"#458EC8"],[0.762541806020067,"#458FC9"],[0.765886287625418,"#458FC9"],[0.769230769230769,"#458FCA"],[0.77257525083612,"#4690CB"],[0.775919732441471,"#4690CB"],[0.779264214046823,"#4691CC"],[0.782608695652174,"#4691CD"],[0.785953177257525,"#4792CD"],[0.789297658862876,"#4792CE"],[0.792642140468227,"#4793CF"],[0.795986622073579,"#4793CF"],[0.79933110367893,"#4894D0"],[0.802675585284281,"#4894D0"],[0.806020066889632,"#4895D1"],[0.809364548494983,"#4895D2"],[0.812709030100334,"#4896D2"],[0.816053511705686,"#4996D3"],[0.819397993311037,"#4997D4"],[0.822742474916388,"#4997D4"],[0.826086956521739,"#4998D5"],[0.82943143812709,"#4A98D6"],[0.832775919732441,"#4A99D6"],[0.836120401337793,"#4A99D7"],[0.839464882943144,"#4A9AD8"],[0.842809364548495,"#4B9AD8"],[0.846153846153846,"#4B9BD9"],[0.849498327759197,"#4B9BDA"],[0.852842809364548,"#4B9BDA"],[0.8561872909699,"#4C9CDB"],[0.859531772575251,"#4C9CDB"],[0.862876254180602,"#4C9DDC"],[0.866220735785953,"#4C9DDD"],[0.869565217391304,"#4D9EDD"],[0.872909698996655,"#4D9EDE"],[0.876254180602007,"#4D9FDF"],[0.879598662207358,"#4D9FDF"],[0.882943143812709,"#4DA0E0"],[0.88628762541806,"#4EA0E1"],[0.889632107023411,"#4EA1E1"],[0.892976588628763,"#4EA1E2"],[0.896321070234114,"#4EA2E3"],[0.899665551839465,"#4FA2E3"],[0.903010033444816,"#4FA3E4"],[0.906354515050167,"#4FA3E5"],[0.909698996655518,"#4FA4E5"],[0.91304347826087,"#50A4E6"],[0.916387959866221,"#50A5E7"],[0.919732441471572,"#50A5E7"],[0.923076923076923,"#50A6E8"],[0.926421404682274,"#51A6E8"],[0.929765886287625,"#51A7E9"],[0.933110367892977,"#51A7EA"],[0.936454849498328,"#51A8EA"],[0.939799331103679,"#52A8EB"],[0.94314381270903,"#52A9EC"],[0.946488294314381,"#52A9EC"],[0.949832775919732,"#52AAED"],[0.953177257525084,"#53AAEE"],[0.956521739130435,"#53ABEE"],[0.959866220735786,"#53ABEF"],[0.963210702341137,"#53ACF0"],[0.966555183946488,"#54ACF0"],[0.969899665551839,"#54ADF1"],[0.973244147157191,"#54ADF2"],[0.976588628762542,"#54AEF2"],[0.979933110367893,"#55AEF3"],[0.983277591973244,"#55AFF4"],[0.986622073578595,"#55AFF4"],[0.989966555183946,"#55B0F5"],[0.993311036789298,"#56B0F6"],[0.996655518394649,"#56B1F6"],[1,"#56B1F7"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"thickness":23.04,"title":"Duration (hrs)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,0.303030303030303,0.606060606060606,0.909090909090909],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":37.9178082191781,"r":7.30593607305936,"b":25.5707762557078,"l":28.4931506849315},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,0.29538041866809],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["BKN","BOS","NYK","PHI","TOR"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["BKN","BOS","NYK","PHI","TOR"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.565310640653106,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["BKN","BOS","NYK","PHI","TOR"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["BKN","BOS","NYK","PHI","TOR"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866809,"y0":0.565310640653106,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866809,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.371286247998577,"x1":0.628713752001423,"y0":0.565310640653106,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.371286247998577,"x1":0.628713752001423,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.70461958133191,"x1":1,"y0":0.565310640653106,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.70461958133191,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866809,"y0":0,"y1":0.434689359346894},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866809,"y0":0,"y1":23.37899543379,"yanchor":0.434689359346894,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.371286247998577,"x1":0.628713752001423,"y0":0,"y1":0.434689359346894},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.371286247998577,"x1":0.628713752001423,"y0":0,"y1":23.37899543379,"yanchor":0.434689359346894,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.70461958133191,"x1":1,"y0":0,"y1":0.434689359346894},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.70461958133191,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":0.434689359346894,"ysizemode":"pixel"}],"annotations":[{"text":"Atlantic","x":0.147690209334045,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Central","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Northwest","x":0.852309790665955,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Pacific","x":0.147690209334045,"y":0.434689359346894,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Southeast","x":0.5,"y":0.434689359346894,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Southwest","x":0.852309790665955,"y":0.434689359346894,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["CHI","CLE","DET","IND","MIL"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["CHI","CLE","DET","IND","MIL"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.371286247998577,0.628713752001423],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["CHI","CLE","DET","IND","MIL"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["CHI","CLE","DET","IND","MIL"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.565310640653106,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["DEN","MIN","OKC","POR","UTA"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DEN","MIN","OKC","POR","UTA"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.70461958133191,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y3","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["DEN","MIN","OKC","POR","UTA"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DEN","MIN","OKC","POR","UTA"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.565310640653106,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["GSW","LAC","LAL","PHX","SAC"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["GSW","LAC","LAL","PHX","SAC"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.29538041866809],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y4","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["GSW","LAC","LAL","PHX","SAC"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["GSW","LAC","LAL","PHX","SAC"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.434689359346894],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x4","title":"","hoverformat":".2f"},"xaxis5":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["ATL","CHA","MIA","ORL","WAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["ATL","CHA","MIA","ORL","WAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.371286247998577,0.628713752001423],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y5","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["ATL","CHA","MIA","ORL","WAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["ATL","CHA","MIA","ORL","WAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.434689359346894],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x5","title":"","hoverformat":".2f"},"xaxis6":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["DAL","HOU","MEM","NOP","SAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DAL","HOU","MEM","NOP","SAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.70461958133191,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y6","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["DAL","HOU","MEM","NOP","SAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DAL","HOU","MEM","NOP","SAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.434689359346894],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x6","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"78101e32dde5":{"fill":{},"x":{},"y":{},"type":"heatmap"}},"cur_data":"78101e32dde5","visdat":{"78101e32dde5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Note the light colours in the Northwest division where teams have to travel far (like the 33 hour trip from Portland and Oklahoma City), while travel durations in the Atlantic and Central divisions are shorter. Of course, the Clippers and Lakers both play in the Staples Center in LA, so their journey time is zero.</p>
</div>
</div>
<div id="ending-the-journey" class="section level1">
<h1>Ending the journey</h1>
<p>So, this post shows the the power of the {osrm} package for travel distance, duration and routing information.</p>
<p>Of course, it’s never usually as simple as having your geographic data ready to go, so I hope this post also provides a good use-case for {rvest} to help you collect information and {tidyverse} for wrangling it.</p>
<p>The plots here are pretty minimal, but they hopefully give a flavour of how to use {leaflet} for plotting points and the routing between them according to {osrm}.</p>
<p>This post was initially written before the travel restrictions brought about by the 2020 pandemic. Of course, the maps would have been much simpler during for the 2020 playoffs, which all took place in <a href="https://en.wikipedia.org/wiki/2020_NBA_Bubble">a ‘bubble’ at Disney World, Florida</a>!</p>
<hr />
<details>
<p><summary>Session info</summary></p>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 4.0.2 (2020-06-22)
##  os       macOS Mojave 10.14.6        
##  system   x86_64, darwin17.0          
##  ui       X11                         
##  language (EN)                        
##  collate  en_GB.UTF-8                 
##  ctype    en_GB.UTF-8                 
##  tz       Europe/London               
##  date     2020-11-15                  
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package           * version  date       lib source                            
##  assertthat          0.2.1    2019-03-21 [1] CRAN (R 4.0.0)                    
##  backports           1.1.8    2020-06-17 [1] CRAN (R 4.0.0)                    
##  bitops              1.0-6    2013-08-17 [1] CRAN (R 4.0.0)                    
##  blob                1.2.1    2020-01-20 [1] CRAN (R 4.0.2)                    
##  blogdown            0.19     2020-05-22 [1] CRAN (R 4.0.0)                    
##  bookdown            0.19     2020-05-15 [1] CRAN (R 4.0.0)                    
##  broom               0.7.0    2020-07-09 [1] CRAN (R 4.0.2)                    
##  cellranger          1.1.0    2016-07-27 [1] CRAN (R 4.0.2)                    
##  class               7.3-17   2020-04-26 [1] CRAN (R 4.0.2)                    
##  classInt            0.4-3    2020-04-07 [1] CRAN (R 4.0.0)                    
##  cli                 2.0.2    2020-02-28 [1] CRAN (R 4.0.0)                    
##  colorspace          1.4-1    2019-03-18 [1] CRAN (R 4.0.0)                    
##  crayon              1.3.4    2017-09-16 [1] CRAN (R 4.0.0)                    
##  crosstalk           1.1.0.1  2020-03-13 [1] CRAN (R 4.0.0)                    
##  curl                4.3      2019-12-02 [1] CRAN (R 4.0.0)                    
##  data.table          1.12.8   2019-12-09 [1] CRAN (R 4.0.0)                    
##  DBI                 1.1.0    2019-12-15 [1] CRAN (R 4.0.0)                    
##  dbplyr              1.4.4    2020-05-27 [1] CRAN (R 4.0.2)                    
##  digest              0.6.25   2020-02-23 [1] CRAN (R 4.0.0)                    
##  dplyr             * 1.0.0    2020-08-10 [1] Github (tidyverse/dplyr@5e3f3ec)  
##  DT                * 0.13     2020-03-23 [1] CRAN (R 4.0.0)                    
##  e1071               1.7-3    2019-11-26 [1] CRAN (R 4.0.0)                    
##  ellipsis            0.3.1    2020-05-15 [1] CRAN (R 4.0.0)                    
##  evaluate            0.14     2019-05-28 [1] CRAN (R 4.0.0)                    
##  fansi               0.4.1    2020-01-08 [1] CRAN (R 4.0.0)                    
##  farver              2.0.3    2020-01-16 [1] CRAN (R 4.0.0)                    
##  forcats           * 0.5.0    2020-03-01 [1] CRAN (R 4.0.2)                    
##  fs                  1.5.0    2020-07-31 [1] CRAN (R 4.0.2)                    
##  generics            0.0.2    2018-11-29 [1] CRAN (R 4.0.0)                    
##  gepaf               0.1.1    2018-03-05 [1] CRAN (R 4.0.0)                    
##  ggplot2           * 3.3.1    2020-05-28 [1] CRAN (R 4.0.0)                    
##  glue                1.4.1    2020-05-13 [1] CRAN (R 4.0.0)                    
##  gtable              0.3.0    2019-03-25 [1] CRAN (R 4.0.0)                    
##  haven               2.3.1    2020-06-01 [1] CRAN (R 4.0.2)                    
##  hms                 0.5.3    2020-01-08 [1] CRAN (R 4.0.2)                    
##  htmltools           0.5.0    2020-06-16 [1] CRAN (R 4.0.2)                    
##  htmlwidgets         1.5.1    2019-10-08 [1] CRAN (R 4.0.0)                    
##  httr                1.4.2    2020-07-20 [1] CRAN (R 4.0.2)                    
##  icon                0.1.0    2020-05-24 [1] Github (ropenscilabs/icon@a5bc1cc)
##  janitor             2.0.1    2020-04-12 [1] CRAN (R 4.0.0)                    
##  jsonlite            1.7.0    2020-06-25 [1] CRAN (R 4.0.0)                    
##  KernSmooth          2.23-17  2020-04-26 [1] CRAN (R 4.0.2)                    
##  knitr               1.29     2020-06-23 [1] CRAN (R 4.0.2)                    
##  labeling            0.3      2014-08-23 [1] CRAN (R 4.0.0)                    
##  lattice             0.20-41  2020-04-02 [1] CRAN (R 4.0.2)                    
##  lazyeval            0.2.2    2019-03-15 [1] CRAN (R 4.0.0)                    
##  leaflet           * 2.0.3    2019-11-16 [1] CRAN (R 4.0.0)                    
##  leaflet.providers   1.9.0    2019-11-09 [1] CRAN (R 4.0.0)                    
##  lifecycle           0.2.0    2020-03-06 [1] CRAN (R 4.0.0)                    
##  lubridate           1.7.8    2020-04-06 [1] CRAN (R 4.0.0)                    
##  magrittr            1.5      2014-11-22 [1] CRAN (R 4.0.0)                    
##  modelr              0.1.8    2020-05-19 [1] CRAN (R 4.0.2)                    
##  munsell             0.5.0    2018-06-12 [1] CRAN (R 4.0.0)                    
##  osrm              * 3.3.3    2020-04-14 [1] CRAN (R 4.0.0)                    
##  pillar              1.4.6    2020-07-10 [1] CRAN (R 4.0.2)                    
##  pkgconfig           2.0.3    2019-09-22 [1] CRAN (R 4.0.0)                    
##  plotly            * 4.9.2.1  2020-04-04 [1] CRAN (R 4.0.0)                    
##  purrr             * 0.3.4    2020-04-17 [1] CRAN (R 4.0.0)                    
##  R6                  2.4.1    2019-11-12 [1] CRAN (R 4.0.0)                    
##  Rcpp                1.0.5    2020-07-06 [1] CRAN (R 4.0.2)                    
##  RCurl               1.98-1.2 2020-04-18 [1] CRAN (R 4.0.0)                    
##  readr             * 1.3.1    2018-12-21 [1] CRAN (R 4.0.2)                    
##  readxl              1.3.1    2019-03-13 [1] CRAN (R 4.0.2)                    
##  reprex              0.3.0    2019-05-16 [1] CRAN (R 4.0.2)                    
##  rlang               0.4.7    2020-07-09 [1] CRAN (R 4.0.2)                    
##  rmarkdown           2.1      2020-01-20 [1] CRAN (R 4.0.0)                    
##  rstudioapi          0.11     2020-02-07 [1] CRAN (R 4.0.0)                    
##  rvest             * 0.3.6    2020-07-25 [1] CRAN (R 4.0.2)                    
##  scales              1.1.1    2020-05-11 [1] CRAN (R 4.0.0)                    
##  selectr             0.4-2    2019-11-20 [1] CRAN (R 4.0.0)                    
##  sessioninfo         1.1.1    2018-11-05 [1] CRAN (R 4.0.0)                    
##  sf                * 0.9-4    2020-06-13 [1] CRAN (R 4.0.0)                    
##  snakecase           0.11.0   2019-05-25 [1] CRAN (R 4.0.0)                    
##  sp                  1.4-2    2020-05-20 [1] CRAN (R 4.0.0)                    
##  stringi             1.4.6    2020-02-17 [1] CRAN (R 4.0.0)                    
##  stringr           * 1.4.0    2019-02-10 [1] CRAN (R 4.0.0)                    
##  tibble            * 3.0.3    2020-07-10 [1] CRAN (R 4.0.2)                    
##  tidyr             * 1.1.0    2020-05-20 [1] CRAN (R 4.0.0)                    
##  tidyselect          1.1.0    2020-05-11 [1] CRAN (R 4.0.0)                    
##  tidyverse         * 1.3.0    2019-11-21 [1] CRAN (R 4.0.2)                    
##  units               0.6-7    2020-06-13 [1] CRAN (R 4.0.0)                    
##  utf8                1.1.4    2018-05-24 [1] CRAN (R 4.0.0)                    
##  vctrs               0.3.2    2020-07-15 [1] CRAN (R 4.0.0)                    
##  viridisLite         0.3.0    2018-02-01 [1] CRAN (R 4.0.0)                    
##  withr               2.2.0    2020-04-20 [1] CRAN (R 4.0.0)                    
##  xfun                0.16     2020-07-24 [1] CRAN (R 4.0.2)                    
##  xml2              * 1.3.2    2020-04-23 [1] CRAN (R 4.0.0)                    
##  yaml                2.2.1    2020-02-01 [1] CRAN (R 4.0.0)                    
## 
## [1] /Library/Frameworks/R.framework/Versions/4.0/Resources/library</code></pre>
</details>
</div>
