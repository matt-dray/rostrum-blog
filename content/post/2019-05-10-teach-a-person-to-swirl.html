---
title: Teach a person to Swirl
author: Matt Dray
date: '2019-05-10'
slug: swirlify
categories:
  - R
  - teaching
tags:
  - swirl
  - swirlify
draft: no
---



<p>Matt Dray (<a href="https://www.twitter.com/mattdray">@mattdray</a>)</p>
<p><img src="/post/2019-05-10-teach-a-person-to-swirl_files/tidyswirl.JPG" width="300" height="300" /></p>
<div id="tldr" class="section level1">
<h1>tl;dr</h1>
<p>Teach people to create tools that teach other people. That seems an efficient way to maximise impact.</p>
<ul>
<li><a href="https://swirlstats.com/">{swirl}</a> lets people learn R from within R</li>
<li><a href="http://swirlstats.com/swirlify/">{swirlify}</a> is a package to help write Swirl courses</li>
<li>This post explains how to start a Swirl course</li>
<li>For example, I’ve begun <a href="https://github.com/matt-dray/tidyswirl">Tidyswirl</a> for teaching <a href="https://www.tidyverse.org/">tidyverse</a> packages</li>
</ul>
</div>
<div id="swirl" class="section level1">
<h1>Swirl</h1>
<p><a href="https://swirlstats.com/">Swirl</a> is a platform that:</p>
<blockquote>
<p>teaches you R programming and data science interactively, at your own pace, and right in the R console!</p>
</blockquote>
<p>Learning is active and understanding is checked throughout. Learners can move at their own pace and download additional courses to learn about new things. And it’s free.</p>
<p>To begin, install and load Swirl then follow the instructions printed in the console.</p>
<pre class="r"><code>install.packages(&quot;swirl&quot;)
library(swirl)
swirl()</code></pre>
<div class="figure">
<img src="/post/2019-05-10-teach-a-person-to-swirl_files/swirl-console.png" alt="Loading and starting Swirl from the console" />
<p class="caption">Loading and starting Swirl from the console</p>
</div>
<p>You can learn about new things by downloading various community-contributed Swirl courses. This post is about how you can quickly create and distribute a new course yourself.</p>
</div>
<div id="swirlify" class="section level1">
<h1>Swirlify</h1>
<p>Sean Kross and Nick Carchedi have created <a href="https://CRAN.R-project.org/package=swirlify">the {swirlify} package</a> to make course creation easy. This post covers a simple workflow to get you started, but <a href="http://swirlstats.com/swirlify/">full Swirlify guidance</a> is available.</p>
<div id="get-up-and-running" class="section level2">
<h2>Get up and running</h2>
<p>Create a new lesson (‘Lesson 1’), which also creates a new course (‘Course’) if it doesn’t exist.</p>
<pre class="r"><code>library(swirl)  # install.packages(&quot;swirl&quot;)
library(swirlify)  # install.packages(&quot;swirlify&quot;)
new_lesson(course_name = &quot;Course&quot;, lesson_name = &quot;Lesson 1&quot;)</code></pre>
<p>The following folder structure is generated:</p>
<pre><code>Working directory/
└── Course/
    └── Lesson_1/
        ├── customTests.R
        ├── dependson.txt
        ├── initLesson.R
        └── lesson.yaml</code></pre>
<p>The <code>lesson.yaml</code> file is basically a text file where each question is stored as text. Users advance through each of these questions in the lesson. You can open the file for editing in the built-in Swirlify Shiny app instead:</p>
<pre class="r"><code>swirlify(course_name = &quot;Course&quot;, lesson_name = &quot;Lesson 1&quot;)</code></pre>
<p>The app will open the current working lesson – Lesson 1 – in a new browser window. On the left is where you create new questions. On the right you can see the lesson file itself.</p>
<div class="figure">
<img src="/post/2019-05-10-teach-a-person-to-swirl_files/swirl-shiny.png" alt="The Swirlify Shiny app provides a GUI for writing lessons" />
<p class="caption">The Swirlify Shiny app provides a GUI for writing lessons</p>
</div>
<p>Note the ‘Help’ tab, which tells you about the types of questions you can make, or you can see the <a href="http://swirlstats.com/swirlify/writing.html#types_of_questions">Swirlify guidance</a>). Basically the question types are:</p>
<ul>
<li>‘message’ for informational text</li>
<li>‘command’ for answers that require simple R expressions as answers</li>
<li>‘numerical’ and ‘text’ for answers that are words or numbers</li>
<li>‘multiple choice’ for multiple choice (as in the figure above)</li>
<li>‘figure’ and ‘video’ for referring to media (video can take a user to any URL)</li>
<li>‘script’ for longer R expressions that requires you to write custom answer tests (this is more advanced)</li>
</ul>
<p>To build a question:</p>
<ol style="list-style-type: decimal">
<li>Choose a question type from the dropdown menu</li>
<li>Fill in the text boxes</li>
<li>Click ‘Save Lesson’</li>
<li>Run <code>test_lesson()</code> to look for errors</li>
<li>Click ‘Demo Lesson’ to try it out</li>
</ol>
<p>You can add objects, like data frames, to the learner’s environment when they start your course. Do this by adding R code to <code>initLesson.R</code>. This can include loading data files, which you should store within the lesson folder.</p>
<p>Continue adding questions until the lesson is complete. Then:</p>
<ol style="list-style-type: decimal">
<li>Run <code>add_to_manifest()</code> to add the lesson to the <code>MANIFEST</code> file (it’ll be created in the course directory if it doesn’t already exist). Lessons in here are recognised as part of the course in the declared order.</li>
<li>Use <code>new_lesson()</code> to create a new one, remembering to change the <code>lesson_name</code> argument.</li>
</ol>
</div>
<div id="extra-knowledge" class="section level2">
<h2>Extra knowledge</h2>
<p>Clearly the process of course building is more nuanced than outlined above, but you can learn more from the documentation on the <a href="http://swirlstats.com/swirlify/index.html">Swirlify</a> site and <a href="https://cran.r-project.org/web/packages/swirlify/swirlify.pdf">reference manual</a>. In partcular, See the <a href="http://swirlstats.com/swirlify/structure.html">course structure</a> and <a href="http://swirlstats.com/swirlify/writing.html">writing lessons</a> pages of the Swirlify guidance.</p>
<p>I’ll touch on three things here: lesson file structure, correct answers and lesson startup.</p>
<div id="lesson-file-structure" class="section level3">
<h3>Lesson file structure</h3>
<p>The lesson file is written in <a href="https://en.wikipedia.org/wiki/YAML">YAML</a>, which is basically a special form of plain text. Questions appear as separate blocks of text that start with a hyphen and a question type (class) declaration, followed by further arguments on new indented lines.</p>
<p>The first block is always <code>Class: meta</code> and provides basic information about the file, like your name and the lesson name. Another simple one is <code>Class: text</code> to which you supply only one more argument, the <code>Output</code>, which is text to display to the user.</p>
<pre><code>- Class: text
  Output: Did I mention chocolate hobnobs are great?</code></pre>
<p>There are actually three ways to add questions:</p>
<ol style="list-style-type: decimal">
<li>In the Shiny app, as outlined earlier in this post.</li>
<li>By using the <code>wq_*()</code> family of functions to add questions to the active lesson – <code>wq_message(output = "Text here")</code> adds informative text, for example.</li>
<li>By writing directly into the YAML file.</li>
</ol>
<p>There’s more on questions classes and how to write them <a href="http://swirlstats.com/swirlify/writing.html#types-of-questions">in the Swirlify guidance</a>.</p>
</div>
</div>
<div id="correct-answers" class="section level2">
<h2>Correct answers</h2>
<p>How are answers enoded and checked in <code>lesson.yaml</code>? Consider the YAML for this question:</p>
<pre><code>- Class: cmd_question
  Output: Use mean() to calculate the mean of the numbers 1 to 5.
  CorrectAnswer: mean(1:5)
  AnswerTests: omnitest(correctExpr=&#39;mean(1:5&#39;))
  Hint: Use the form x:y to provide numbers to mean().</code></pre>
<p>So <code>CorrectAnswer</code> is where you provide the correct answer (!). This line will be run if the user chooses to <code>skip()</code> the question. <code>AnswerTests</code> is, however, what the user’s input will actually be evaluated against. It uses the <code>omnitest</code> function to compare the correct expression (<code>correctExpr</code>) to the user’s answer.</p>
<p>But often there’s more than one way to answer. The <code>any_of_exprs()</code> function should be used in this case.</p>
<pre><code>- Class: cmd_question
  Output: Use mean() to calculate the mean of the numbers 1 to 5.
  CorrectAnswer: mean(1:5)
  AnswerTests: any_of_exprs(&#39;mean(1:5)&#39;, &#39;mean(c(1, 2, 3, 4, 5))&#39;)
  Hint: You can use the form x:y or c(x, y) to provide numbers to mean().</code></pre>
<p>There’s more on answer testing <a href="http://swirlstats.com/swirlify/writing.html#answer-testing">in the Swirlify guidance</a>, including how to write custom answer tests.</p>
</div>
<div id="lesson-startup" class="section level2">
<h2>Lesson startup</h2>
<p>Anything in the <code>initLesson.R</code> file will be run when the lesson is loaded. You can create objects and refer to them in your questions. For example, you could add a data frame:</p>
<pre class="r"><code>biscuits &lt;- data.frame(
  name = c(&quot;Chocolate hobnob&quot;, &quot;Digestive&quot;, &quot;Custard cream&quot;),
  rating = c(10, 5, 7) 
)</code></pre>
<p>You could then ask in <code>lesson.yaml</code> something like:</p>
<pre><code>- Class: cmd_question
  Output: Use index notation to subset for biscuits rated over 5.
  CorrectAnswer: biscuits[biscuits$rating &gt; 5, ]
  AnswerTests: omnitest(correctExpr=&#39;biscuits[, biscuits$rating &gt; 5]&#39;)
  Hint: Remember the format datframe[rows, columns].</code></pre>
<p>The dataframe was loaded on startup, so the user can interact with it to answer the question.</p>
<p>You can also add datasets to the lesson folder and read them into the user’s environment via the <code>initLesson.R</code> file. See the Swirlify <a href="http://swirlstats.com/swirlify/structure.html#including-data">guidance on including data</a> for more information.</p>
</div>
<div id="share-your-course" class="section level2">
<h2>Share your course</h2>
<p>Congratulations. You’re ready to share your course.</p>
<p>There are <a href="http://swirlstats.com/swirlify/sharing.html">several ways to do this</a>. It’s easiest for learners to use Swirl’s <code>swirl::install_course_*()</code> functions to install courses from:</p>
<ul>
<li>a GitHub repo</li>
<li>a zip file stored on DropBox, Google Drive, or some URL</li>
<li>a course folder – zipped or not – downloaded locally on their machine</li>
</ul>
<p>You can also compress your course to a single <code>.swc</code> file with <code>compress_course()</code> and raise a pull request for it to be hosted on the <a href="http://swirlstats.com/scn/">Swirl Course Network</a>. It can be downloaded from there with <code>install_course()</code>.</p>
<p>Swirl is strengthened by having a greater number and range of courses.</p>
</div>
</div>
<div id="tidyswirl" class="section level1">
<h1>Tidyswirl</h1>
<p>To minimise hypocrisy, I’ve started <a href="https://github.com/matt-dray/tidyswirl">a Swirl course called Tidyswirl</a>. The goal is to introduce each core package of <a href="https://www.tidyverse.org/">the tidyverse</a>. It currently has draft lessons for <a href="https://tidyr.tidyverse.org/">{tidyr}</a> and <a href="https://tibble.tidyverse.org/">{tibble}</a>.</p>
<p>Tidyswirl is currently in development on GitHub. To install:</p>
<pre class="r"><code>install_course_github(&quot;matt-dray&quot;, &quot;tidyswirl&quot;)</code></pre>
<p>Please feel free to <a href="https://github.com/matt-dray/tidyswirl/blob/master/CONTRIBUTING.md">contribute new lessons or raise issues</a>.</p>
</div>
<div id="plea" class="section level1">
<h1>Plea</h1>
<p>The R community is large and friendly. Swirl helps people learn. It would be great to see more courses being made.</p>
</div>
