---
title: Holepunch a {drake}
author: Matt Dray
date: '2019-08-25'
slug: holepunch-drake
categories:
  - R
  - teaching
tags:
  - drake
  - binder
draft: no
---



<p><img src="/post/2019-08-24-hole-punching-a-drake_files/drake-meme.jpg" width="400" /></p>
<div id="tldr" class="section level1">
<h1>tl;dr</h1>
<p><a href="https://mybinder.org/">Binder</a> lets people explore your GitHub-based R code in a live, browser-based instance of RStudio – for free. Set-up for R projects is quick with <a href="(https://karthik.github.io/holepunch/)">{holepunch}</a>.</p>
<p>I’ve used {holepunch} on <a href="https://github.com/matt-dray/drake-egg-rap">my {drake} demo repo</a>. Click the ‘launch binder’ badge in the repo’s README.</p>
</div>
<div id="icing-on-the-drake" class="section level1">
<h1>Icing on the {drake}</h1>
<p><a href="https://www.rostrum.blog/2019/07/23/can-drake-rap/">I wrote</a> about how <a href="https://twitter.com/wmlandau">Will Landau</a>’s excellent <a href="https://ropensci.github.io/drake/">{drake} package</a> could be used to minimise errors and speed up the production of statistical reports by the UK government. I put a demo of this <a href="https://github.com/matt-dray/drake-egg-rap">in a GitHub repo</a>.</p>
<p>There are two things I’d like:</p>
<ol style="list-style-type: decimal">
<li>To improve trust further, citizens should be able to quickly open and explore the code behind a statistical report in the environment that the analyst was actually working in, with the correct R version and package dependencies.</li>
<li>When I’m demonstrating the {drake} example, everyone in the room should have access to the same, consistent environment. This will minimise technical issues and ensure the code is being run in the intended environment.</li>
</ol>
<p>Turns out that these issues can be solved with Binder.</p>
</div>
<div id="in-a-binder" class="section level1">
<h1>In a Bind(er)</h1>
<p><a href="https://mybinder.org/">Binder</a> is an open source project that makes it easier to share and explore the code from a GitHub repository.</p>
<p>The repo owner specifies an environment (e.g. R version and package dependencies) and people can click a badge in the README to launch the code in a live instance of RStudio. Magic.</p>
<div class="figure">
<img src="/post/2019-08-24-hole-punching-a-drake_files/binder-badge.png" alt="The README for the drake-egg-rap repo showing the Binder badge" width="300" />
<p class="caption">The README for the drake-egg-rap repo showing the Binder badge</p>
</div>
<p>This can really help when teaching, in particular. In fact, Will Landau used it for his <a href="https://github.com/wlandau/learndrake">{learndrake} course-in-a-package</a> repo.</p>
</div>
<div id="holepunch-drunk" class="section level1">
<h1>{holepunch}-drunk</h1>
<p>But wait: <a href="http://inundata.org/">Karthik Ram</a> has made <a href="https://karthik.github.io/holepunch/">the {holepunch} package</a> so that R users can set up Binder for their repo in a few lines of code.</p>
<p>Do read the docs, but after <code>install.packages(holepunch)</code> and <code>library(holepunch)</code>:</p>
<ol style="list-style-type: decimal">
<li><code>write_compendium_description()</code> to create a DESCRIPTION file listing the repo’s dependencies (<a href="http://r-pkgs.had.co.nz/description.html">just like what you need for an R package</a>)</li>
<li><code>write_dockerfile()</code> to set up a <a href="https://docs.docker.com/get-started/part2/">dockerfile</a> (from <a href="https://www.rocker-project.org/">The Rocker Project</a>) that installs RStudio and an R version of your choice</li>
<li><code>generate_badge()</code> to get some code for a ‘launch binder’ badge that you can copy-paste to your repo’s README</li>
</ol>
<p>Then you can push the changes to GitHub and the ‘launch binder’ badge will appear your README. Clicking this will generate an RStudio instance with specifications as per the DESCRIPTION and dockerfile.</p>
<div class="figure">
<img src="/post/2019-08-24-hole-punching-a-drake_files/rstudio-browser-demo.png" alt="RStudio in the browser—launched from Binder—showing all the files associated with the drake-egg-rap repo" />
<p class="caption">RStudio in the browser—launched from Binder—showing all the files associated with the drake-egg-rap repo</p>
</div>
</div>
