---
title: 'Deer-vehicle collisions: a Shiny app'
author: Matt Dray
date: '2019-01-18'
slug: deer-collisions
categories:
  - dataviz
  - app
tags:
  - shinydashboard
  - shiny
  - scotland
  - deer
  - vehicles
  - leaflet
  - datatable
draft: no
---

<link href="/rmarkdown-libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />


<p>Matt Dray (<a href="https://www.twitter.com/mattdray">@mattdray</a>)</p>
<div class="figure">
<img src="/post/2019-01-18-deer-vehicle-collisions-a-shiny-app_files/Capreolus_capreolus_2_(Marek_Szczepanek).jpg" alt="Roe deer by Marek Szczepanek, CC BY-SA 4.0" style="width:100.0%" />
<p class="caption"><a href="https://commons.wikimedia.org/wiki/Capreolus_capreolus#/media/File:Capreolus_capreolus_2_(Marek_Szczepanek).jpg">Roe deer by Marek Szczepanek</a>, CC BY-SA 4.0</p>
</div>
<div id="open-data" class="section level1">
<h1>Open data</h1>
<p>Deer roam Scotland. So do humans. It’s a problem when they meet at high speed.</p>
<p><a href="http://www.deercollisions.co.uk/">The National Deer-Vehicle Collisions Project</a>, administered by <a href="http://www.thedeerinitiative.co.uk/">The Deer Initiative</a>, has been monitoring data on deer-vehicle collisions in the UK.</p>
<p>The data are open. I found the dataset when skimming through <a href="https://data.gov.uk/dataset/838b88d8-7509-435c-9649-90f1881b5ad7/deer-vehicle-collisions">data.gov.uk</a> (a classic weekend activity for all the family). It links to the <a href="https://gateway.snh.gov.uk/natural-spaces/dataset.jsp?dsid=DVC">SNH Natural Spaces site</a> where you can download the data as shapefile, GML or KML under the <a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence</a>.</p>
<p>I couldn’t find an interactive visualisation of these data and I don’t spend much time working with R Shiny,<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> so why not.</p>
</div>
<div id="a-simple-shiny-app" class="section level1">
<h1>A simple Shiny app</h1>
<p>I recommend you check out <a href="https://mattdray.shinyapps.io/scot-deer-collisions/">the full-screen app live at mattdray.shinyapps.io/scot-deer-collisions/</a>.</p>
<p>I’ve embedded a compact version of it below (it’ll take a moment to load). Click the <i class="fas  fa-bars "></i> for the options menu to start filtering the data.</p>
<iframe src="https://mattdray.shinyapps.io/scot-deer-collisions/" width="100%" height="1000" ;>
</iframe>
<p>The <a href="https://github.com/matt-dray/scot-deer-collisions">code for the app is available on GitHub</a>. You can also <a href="https://github.com/matt-dray/scot-deer-collisions/tree/master/data">download the cleaned data in CSV or RDS format</a>.</p>
<p>It was built in R with:</p>
<ul>
<li>the <a href="https://rstudio.github.io/shinydashboard/"><code>shinydashboard</code> package</a> for a nice layout and value boxes</li>
<li>the <a href="https://rstudio.github.io/leaflet/"><code>leaflet</code> package</a> for the interactive map</li>
<li>the <a href="https://rstudio.github.io/DT/"><code>DT</code> package</a> for the interactive datatable</li>
</ul>
<p>In case you still aren’t sure, here’s a gif of the full app in action.</p>
<div class="figure">
<img src="https://media.giphy.com/media/ZvK6zz5E4agAL2gf6u/giphy.gif" alt="Engifified look at the fullscreen app" style="width:100.0%" />
<p class="caption">Engifified look at the fullscreen app</p>
</div>
</div>
<div id="limitations" class="section level1">
<h1>Limitations</h1>
<p>I may update the app in future or take it down entirely. It’s hosted for free at <a href="http://www.shinyapps.io/">shinyapps.io</a>, which means that it can only receive a fixed number of visits each month before it becomes unavailable. <a href="https://www.github.com/matt-dray/scot-deer-collisions">The code will continue to exist on GitHub</a> where you can leave an issue or fork it to make it better.</p>
<p>I limited the filters to year, month and local authority. I could have included deer species and road, but the data are sparse and the formatting wasn’t great. I cleaned these variables up a bit and they’re available as filterable columns in the interactive table.</p>
<p>There’s a large number of points and it doesn’t make sense to show them all at once because it slows the app down. There are methods for improving this, but I assume most people will be looking at specific local authorities or roads rather than the country as a whole.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>But see <a href="https://www.rostrum.blog/2018/07/17/world-cup-age-app/">this post about a Shiny app</a> I made that that one colleague described as ‘very depressing’.<a href="#fnref1">↩</a></p></li>
</ol>
</div>
