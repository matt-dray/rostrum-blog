---
title: How long does it take to write a blog
author: Matt Dray
date: '2019-04-11'
slug: blog-writing
categories: []
tags: []
draft: yes
---

rostrum.blog is a year old `r emo::ji("tada")`

There’s been more than a post every two weeks.

<details><summary>Click for code</summary>
```{r message=FALSE}
# Load packages
library(dplyr)  # data manipulation
library(rvest)  # web scrape
library(stringr)  # string manipulation
library(lubridate)  # deal with dates
library(ggplot2)  # plots
library(plotly)  # interactive plots

# Scrape the rostrum.blog home page
html <- read_html("https://rostrum.blog/")

# Extract the post titles
title <- html %>%
  html_nodes(".archive-item-link") %>%
  html_text()

# Extract the post dates
date <- html %>%
  html_nodes(".archive-item-date") %>%
  html_text() %>%
  str_replace_all("\n|[:space:]", "")

# Dataframe of titles and dates
posts <- tibble(title = title, date = date)

# Create plot object
p <- posts %>%
  mutate(
    date = ymd(date),  # to space out the points by date
    count = 1  # dummy to indicate a post was made
  ) %>% 
  ggplot(aes(x = date, y = count, label = title)) +
  geom_point(color = "#1D8016") +
  theme_void() +  # strip plot elements
  theme(panel.grid = element_blank())  # to stop plotly rendering grid

# Pass the plot object to plotly (actually performed outside this ccode chunk)
# ggplotly(p)
```
</details>

```{r echo=FALSE, fig.height=2}
# Pass the plot object to plotly
ggplotly(p, tooltip = c("date", "title"))
```
How long does it take to write a post here?

This massively varies.

I’ve written most posts on my commute.

As a proxy for time taken on a post, I’m going to look at the commit history on the rostrum.blog repo from the first commit of each post to its publication date (as recorded in the RSS record). But the process rarely stops there, so I’ll look at any post-publication corrections (spellings, etc).

[There's not much point looking at the quantity of commits or their size, since these can vary wildly and aren't great indicators of anything.] 

[I’m going to judge effort by total lines created. That’s not the best measure. There’s effort in thinking and formulating and drawing diagrams that isn’t included. Some posts were about things I’d made; things that also took effort and time that isn’t captured here.]

```{r}
library(tibble)

url <- "https://github.com/matt-dray/rostrum-blog/tree/master/content/post"
nodes <- ".js-navigation-item~ .js-navigation-item+ .js-navigation-item .js-navigation-open"

rmd_html <- read_html(url) %>% 
  html_nodes(nodes) %>% 
  html_text()

rmd_files <- rmd_html %>% 
  enframe(name = NULL) %>%
  rename(rmd_filename = value) %>% 
  filter(str_detect(rmd_html, ".Rmd")) %>% 
  mutate(rmd_filepath = paste0("https://github.com/matt-dray/rostrum-blog/commits/master/content/post/", rmd_filename))

rmd_files[1:5, 1]
```



```{r}
library(purrr)
library(lubridate)
library(tidyr)

urls <- select(rmd_files, rmd_filepath) %>%
  slice(-nrow(.)) %>% 
  pull()

names <- select(rmd_files, rmd_filename) %>%
  slice(-nrow(.)) %>% 
  pull()

read <- map(urls, read_html) %>%
  set_names(names)

nodes <- map(read, html_nodes, "relative-time")

dates <- map(nodes, html_text)

commits <- enframe(dates) %>%
  unnest(value) %>%
  distinct(name, value) %>%
  mutate(value = mdy(value))

commits
```

