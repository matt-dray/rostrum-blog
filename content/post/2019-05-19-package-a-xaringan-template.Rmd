---
title: Package a Xaringan template
author: Matt Dray
date: '2019-05-22'
slug: xaringan-template
categories:
  - R
tags:
  - presentation
  - xaringan
  - rmarkdown
  - template
draft: yes
---

Matt Dray ([\@mattdray](https://www.twitter.com/mattdray))

![](https://raw.githubusercontent.com/matt-dray/gdstheme/master/img/20190514-template.gif)

# Xaringan

[The {xaringan} package](https://slides.yihui.name/xaringan/) by [Yihui Xie](https://yihui.name/) implements [remark.js](https://github.com/gnab/remark) in [R Markdown](https://bookdown.org/yihui/rmarkdown/) so you can create reproducible presentations. [Here's why he made it](https://yihui.name/en/2017/08/why-xaringan-remark-js/).

Yihui has [encouraged people to submit](https://yihui.name/en/2017/10/xaringan-themes/) their styles to the {xaringan} package. For example, the [RLadies theme](https://alison.rbind.io/post/r-ladies-slides/) is now built in.

This post is about delivering a theme, including a template, as a package.

# Creating a theme

My organisation uses a Google Slides template with pre-set styles. Any R outputs have to be copy-pasted in, which isn't very reproducible.

The obvious answer was to approximate the theme with Xaringan by creating some CSS style files and an R Markdown template. I've done this and put it in [a GitHub repo](). This post outlines the approach.

The output only has to be good enough to fool my colleagues, so it can definitely be improved.

## Do it in style

You specify style in one or more CSS files. Typically for Xaringan you'd create two files:

* `theme.css` for the general document styles, like defining the background colour of a particular slide class
* `theme-fonts.css` to set the fonts, which can for example be different for the body and script

You reference these files in the YAML header of your Xaringan R Markdown and the style is enacted when you render it.

I tweaked the [default Xaringan CSS files](https://github.com/yihui/xaringan/tree/master/inst/rmarkdown/templates/xaringan/resources) to create the slide [classes](https://www.w3schools.com/cssref/sel_class.asp) I wanted. I overwrote the `.remark-slide-content` class for regular text slides and created `title-slide` and `heading-slide` classes too.

You can see the full content of these CSS files in [the GitHub repo](https://github.com/matt-dray/gdstheme/tree/master/inst/rmarkdown/templates/gdstheme/skeleton).

As an example, here is the CSS class that styles a heading slide:

```
.heading-slide {
  background-color: #2372b6;  /* blue background */
  color: #fff;                /* white text*/
  text-shadow: 0 0 0;         /* no text shadow */
  border-bottom: 0;           /* no border */
  font-size: 90px;            /* large text size */
  font-weight: bold;          /* headings are bold */
}
```

As well as specifying classes, I've added some additional [tags](https://www.w3schools.com/tags/tag_style.asp) for minor modifications that can be specified by the user:

```
.black { color: #000; }      /* black text for heading slides */
.bold { font-weight: bold; } /* embolden name on title/end slides */
```

The CSS file for fonts is much simpler; it just imports and declares fonts.

My organisation uses the proprietary Helvetica for its body type. Specifying the system's `sans-serif` font on a Mac results in Helvetica and will produce the close-enough Arial on Windows machines. For the monospace font -- used for displaying script -- I've chosen Fira Mono, which I think is more readable than the default system `monospace`.

The file starts by importing the fonts from Google Fonts and then declares them in CSS. I wrote a little about how to do this [in another post]().

```
@import url('https://fonts.googleapis.com/css?family=Roboto');
@import url('https://fonts.googleapis.com/css?family=Fira+Mono');

body { font-family: sans-serif, 'Roboto'; }
.remark-code, .remark-inline-code { font-family: 'Fira Mono', monospace; }
```

## Lay down a template

The style is not the only important part of recreating my organisation's presentations -- I also need to create an R Markdown template to demonstrate a restricted set of accepted slide designs. The design philosophy is important to the organisation.

The template itself is just a pre-filled R Markdown that shows the approved slide types and some example content. For example, the first slide of my organisation's template doesn't actually contain a 'title'. Instead it's an introduction slide that contains the speaker's name, job, affiliation and Twitter handle.

The user may not know to set `class: title-slide` and add `seal: false` in the YAML to override the creation of a default title slide. This is instead specified for the user in the template:

```
---
output:
  xaringan::moon_reader:
    css: ["default", "gds.css", "gds-fonts.css"]
    seal: false
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

class: title-slide, middle

.bold[Firstname Surname]

Job title

Government Digital Service

@username

---
```

The top half of the code is the YAML that provides metadata for the R Markdown file. Note the reference to the CSS files and `seal: false` as mentioned. 

The bottom half is the pre-filled opening slide with the speaker's details; the user needs only to modify the text to suit them. Note the use of the `title-slide` class and the `middle` class for vertical alignment. There's also the `.bold[]` tag mentioned ealier in this post.

## Deliver a package

So how can the CSS and RMarkdown template be delivered to people in one bundle? In a package of course.

You need a specific repo structure to provide your template. This is all explained in the [Document Templates](https://bookdown.org/yihui/rmarkdown/document-templates.html) chapter of the '[R Markdown: a Definitive Guide](https://bookdown.org/yihui/rmarkdown/)' book by [Yihui Xie](https://yihui.name/), [JJ Allaire](https://github.com/jjallaire) and [Garrett Grolemund](https://twitter.com/StatGarrett).

At the very least, your repo will need to contain the path `inst/rmarkdown/templates/themename/skeleton/`, which will typically contain three files to create a styled Xaringan presentation:

* `theme.css` for the slide styles
* `theme-fonts.css` for the font face specifications
* `skeleton.Rmd` for the template you created

I've also included an `img/` folder to hold stock images I've used in the template, but this isn't strictly necesary.

A user can now install the package and get access to your styles and template.

# How to use

You've written your code and packaged it, so how do you actually use it?

You can install the package with:

```{r eval=FALSE}
remotes::install_github("matt-dray/gdstheme")
```

After installation the template will appear in the 'from template' section of the new RMarkdown window. Selecting it will open the RMarkdown template.

![](https://raw.githubusercontent.com/matt-dray/gdstheme/master/img/new-rmd.png)

When you knit this file, {knitr} looks to the CSS files referenced in the YAML to render the style provided.