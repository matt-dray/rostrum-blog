---
title: 'Can {drake} RAP?'
author: Matt Dray
date: '2019-06-10'
slug: drake-lays-an-egg
categories:
  - R
tags:
  - reproducibility
  - drake
  - eggs
  - rap
  - reproducible analytical pipelines
  - make
  - make file
draft: yes
---



<div id="take-the-rap" class="section level1">
<h1>Take the RAP</h1>
<p><a href="https://ukgovdatascience.github.io/rap-website/">Reproducible Analytical Pipelines</a> (RAP) is an approach to generating <a href="https://www.gov.uk/search/research-and-statistics">the UK government’s official statistics</a> that improves reproducibility, minimises errors and speeds up production.</p>
<p>RAP does away with the tangled webs of spreadsheets, copy-pasting errors and infernal <code>publication_FINAL-v2_md-comments_FINAL.docx</code> file naming.</p>
<p>Instead, RAP encourages a script-based workflow that’s beefed up with stuff like version control, dependency management and automated testing.</p>
</div>
<div id="bake-a-drake-make-cake" class="section level1">
<h1>Bake a {drake} make cake</h1>
<p>One step along the RAP journey could be to use a <a href="https://en.wikipedia.org/wiki/Makefile">‘makefile’</a>. This is a plain-text recipe file that codifies the order of script execution and minimises the need to re-run the entire code base during development.</p>
<p><a href="https://github.com/ropensci/drake">{drake}</a> is a package by <a href="https://wlandau.github.io/">Will Landau</a> that lets you create make files with a distinct R flavour.</p>
<p>In brief, you prepare a ‘plan’ file that calls functions to perform you analysis and create your output. It’s a bit like a cake recipe.</p>
<p>Sometimes you need to re-run your code if you’ve made a change. {drake} only runs the parts that have changed plus anything downstream that depends on those parts.</p>
<p>This saves compute time and means you don’t have to remember any dependencies yourself.</p>
<p>{drake} even visualises a dependency network diagram for you so you can understand these relationships and what has changed following any modifications of the code.</p>
<p>There’s some helpful material out there for learning more about {drake}.</p>
<ul>
<li><a href="https://ropenscilabs.github.io/drake-manual/">User Manual</a></li>
<li><a href="https://ropensci.github.io/drake/">Documentation</a></li>
<li><a href="https://github.com/krlmlr/drake-sib-zurich/blob/master/cheat-sheet.pdf">Cheat sheet</a> by Kirill Müller</li>
<li><a href="https://aedobbyn.github.io/nyc-fires/index.html#1">Drake for workflow happiness</a> slides by <a href="https://dobb.ae/">Amanda Dobbyn</a></li>
</ul>
</div>
<div id="drake-it-to-make-it" class="section level1">
<h1>{drake} it to make it</h1>
<p>What might an example of {drake}</p>
<ul>
<li><a href="https://github.com/matt-dray/drake-egg-rap">GitHub</a></li>
<li><a href="https://matt-dray.github.io/drake-egg-rap/">Example HTML output</a></li>
</ul>
<div id="eggsample" class="section level2">
<h2>Eggsample</h2>
<p>There is a <a href="https://www.statisticsauthority.gov.uk/osr/list-of-national-statistics/">National Statistics</a> <a href="https://www.gov.uk/government/statistics/egg-statistics">publication that tracks egg production</a>.</p>
</div>
<div id="folder-structure" class="section level2">
<h2>Folder structure</h2>
</div>
<div id="a-very-cunning-plan" class="section level2">
<h2>A very cunning plan</h2>
</div>
</div>
