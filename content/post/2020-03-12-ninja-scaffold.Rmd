---
title: Ninjutsu scaffolding
author: Matt Dray
date: '2020-03-12'
slug: ninja-scaffold
categories:
  - code
  - tutorial
tags:
  - css
  - kunoichi
  - ninjutsu
  - rmarkdown
  - xaringan
draft: yes
---

# tl;dr 

You can create themes for {xaringan} by modifying the CSS. [Emi Tanaka]()'s [ninjutsu]() CSS, avaiable from within {xaringan} itself, does something slightly different: it lets you break up your slide into sections. This is useful for arranging text, plots and other things onto the page. You can take inspiration from her code to create your won layouts.

# {xaringan}

I've really taken to the [{xaringan}](https://slides.yihui.org/xaringan/#1) package by [Yihui Xie](https://yihui.org/), an implementaiton of [remark.js](https://github.com/gnab/remark), for creating reproducible slides with R.

You can create your own themes by supplying [CSS](). Yihui has [encouraged users](https://yihui.org/en/2017/10/xaringan-themes/) to add their themes to the package itself.

You specify CSS filepaths in the YAML header:

```{}
css: [default.css, example.css, example-fonts.css]
```

The order matters: `default.css` will be applied, but instructions from `example.css` and `example-fonts.css` will overwrite `default.css` where they clash. So if `example.css` has a line to make the background green, it will take precendence over the background colour declaration from the `default.css` file.

If you don't know CSS, [Garrick Aden-Buie](https://www.garrickadenbuie.com/)'s [{xaringanthemer}](https://www.garrickadenbuie.com/project/xaringanthemer/) package lets you write R code that will generate the CSS for you.

# Layouts

I've been thinking about slide _layouts_ as much as themes: how can I place items like plots and tables into defined 'segments' of a page with minimal tweaking

Sure, the default {xaringan} CSS has things like `.pull-left[]` and `.pull-right[]` that can place content but this only goes so far for my particular need.

# Ninjutsu

[Emi Tanaka](https://twitter.com/statsgen) (a [great hacker](https://pagedown.rbind.io/html-letter)) created the '[kunoichi](https://emitanaka.org/ninja-theme/themes/kunoichi/kunoichi-theme-example.html#1)'[^kunoichi] theme for {xaringan}.

But more pertinent for this post is that Emi created 'ninjutsu'[^kunoichi]: CSS that provides methods for splitting your page into columns and rows.

Ninjutsu has lots of classes for splitting slides into sections. For example, the `split-1-2-1` class splits the slide into three columns that are 25%, 50% and 25% of the total page width (hence '1-2-1').

```{css, split121, eval=FALSE}
.split-1-2-1>.column:first-of-type {
  width: 25%; height: 100%; position: absolute; top: 0; left: 0; 
}
.split-1-2-1>.column:nth-of-type(2) {
  width: 50%; height: 100%; position: absolute; top: 0; left: 25%;
}
.split-1-2-1>.column:nth-of-type(3) {
  width: 25%; height: 100%; position: absolute; top: 0; right: 0;
}
```

So the CSS for this class has one line for each column. So the first column (`first-of-type`) starts from the extreme left (`left: 0;`), the middle column (`nth-of-type(2)`) starts where the first one ends (`left: 25%;`) and the third one (`nth-of-type(3)`) starts from the extreme right (`right: 0;`).

# Hacking the hacker

Specifically, I wanted to define title, body and footer sections for:

* a title page
* a main, generic content page
* a content page that could show a table and plot next to each other, with a wider table underneath

This means I could colour them and/or fill them with content according to some additional CSS formatting.

To do this, I tweaked Emi's `split-1-2-1` class to create classes with rows (rather than columns) split into the sections I wanted.

## Defining the classes

The title page has two rows, one is a large header area to hold a logo and the other is where the talk metadata goes:

```{css, eval=FALSE}
.split-title>.row:first-of-type {
  height: 20%; width: 100%; position: absolute; top: 0; left: 0;
}
.split-title>.row:nth-of-type(2) {
  height: 80%; width: 100%; position: absolute; left: 0; top: 20%;
}
```

The main slide class has a title and footer section and the content goes in the large section inbetween:

```{css, eval=FALSE}
.split-main1>.row:first-of-type {
  height: 8%; width: 100%; position: absolute; top: 0; left: 0;
}
.split-main1>.row:nth-of-type(2) {
  height: 87%; width: 100%; position: absolute; left: 0; bottom: 5%;
}
.split-main1>.row:nth-of-type(3) {
  height: 5%; width: 100%; position: absolute; bottom: 0; left: 0;
}
```

I modified slightly this class so the large blank area is split once more:

```{css, eval=FALSE}
.split-main2>.row:first-of-type { 
  height: 8%; width: 100%; position: absolute; top: 0; left: 0;
  }
.split-main2>.row:nth-of-type(2) { 
  height: 43.5%; width: 100%; position: absolute; left: 0; top: 8%;
  }
.split-main2>.row:nth-of-type(3) { 
  height: 43.5%; width: 100%; position: absolute; left: 0; bottom: 5%;
  }
.split-main2>.row:nth-of-type(4) { 
  height: 5%; width: 100%; position: absolute; bottom: 0; left: 0;
  }
```

## Using the classes in practice

The `split-main1` is used like this:

```{r example-split-main1, eval=FALSE}
---
class: split-main1

.row[.content[
  Title
]]

.row[.content[
  Some content
]]

.row[.content[
  Footer
]]
```

The `split-main2` class has an additional `.row[]` to define because the main body area is split in two horizontally. I've also added a `split-two[]` call inside the second `.row[]` call and declared `.column[]` twice within it. This results the main body area containing one row the width of the page and one row split into two columns.

```{r example-split-main2, eval=FALSE}
---
class: split-main2

.row[.content[
  Title
]]

.row[.content[
  Some content
]]

.row[.content[
  .split-two[
    .column[.content[
      Some content
    ]]
    .column[.content[
      More content
    ]]
  ]
]]

.row[.content[
  Footer
]]
```

[^kunoichi]; '[Kunoichi]()' is the Japanese word for a female ninja and 'ninjutu' means [](). Emi also supplied  '[shinobi]()' style. These names fit Yihui's ninja inspiration for {xaringan} via [Naruto]().
