---
title: A GitHub repo template for R analysis
author: Matt Dray
date: '2019-06-11'
categories:
  - code
tags:
  - github
  - r
  - template
  - polite
slug: r-repo-template
draft: no
---



<p><img src="/post/2019-06-11-a-repo-template-for-r-analysis_files/use-this.png" alt="The green button on GitHub that's used to copy a repository template. It says 'use this template' on it."></p>
<div id="sharing-is-caring" class="section level1">
<h1>Sharing is caring</h1>
<p>GitHub has introduced <a href="https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/">repository templates</a> to make it easier to share frequently-used repo structures and boilerplate code. You can copy a whole repo as many times as you like, unlike forks.</p>
<p>Following a template can help keep your work organised and encourage consistency within and between projects. I can see this being useful for <a href="https://ukgovdatascience.github.io/rap-website/">sharing optimal workflows across boundaries like government departments</a>.</p>
</div>
<div id="tada" class="section level1">
<h1>Tada</h1>
<p><a href="https://github.com/matt-dray/r-analysis-template/">I’ve made a lightweight repo template</a> to make it easier for me to start very simple analysis projects with R.</p>
<p>It’s <a href="https://stackoverflow.com/questions/802050/what-is-opinionated-software">opinionated</a>, but others may find it useful.</p>
<p><img src="/post/2019-06-11-a-repo-template-for-r-analysis_files/repo.png" alt="Screenshot of GitHub showing the contents of the repository template, including folders for data and outputs."></p>
<p>To use it, either:</p>
<ol style="list-style-type: decimal">
<li><a href="https://github.com/matt-dray/r-analysis-template/">Go to the repo</a> and click the green ‘use this template button’</li>
<li><a href="https://github.com/matt-dray/r-analysis-template/generate/">Append the repo URL with ‘/generate’</a> to go straight to the repo copying page</li>
</ol>
<p>The screen looks like when you create a new repo from scratch, but it mentions that ‘the new repository will start with the same files and folders’ as the template repo. Add a name and description for the repo copy and hit the ‘create repository from template’ button.</p>
<p><img src="/post/2019-06-11-a-repo-template-for-r-analysis_files/copy-repo.png" alt="Screenshot of the GitHub page for creating a repository from the template"></p>
<p>That’s it.</p>
</div>
<div id="basic-template-structure" class="section level1">
<h1>Basic template structure</h1>
<p>Much of the sentiment for creating this sort of folder structure has been described in detail elsewhere, including by <a href="https://nicercode.github.io/blog/2013-04-05-projects/">Richard Fitzjohn</a> and <a href="http://blog.jom.link/implementation_basic_reproductible_workflow.html">Joris Muller</a>.</p>
<p>In short, the root has:</p>
<ul>
<li>executable R files, separated into ‘sensible’ units of analysis (‘read’, ‘tidy’, etc)</li>
<li>an R Project file (<code>.Rproj</code>)</li>
<li>a .gitignore for R, with <code>.DS_Store</code> added</li>
<li>a <code>README.md</code> to summarise the project as a whole</li>
</ul>
<p>There are folders for:</p>
<ul>
<li>R functions (<code>R/</code>)</li>
<li>raw, untouched, read-only data sets (<code>data/</code>)</li>
<li>report source and output files (<code>doc/</code>)</li>
<li>external files (<code>ext/</code>), such as pre-trained models</li>
</ul>
<p>Of course, these can be added to, removed or renamed as required.</p>
</div>
<div id="bulk-it-up" class="section level1">
<h1>Bulk it up</h1>
<p>It’s not enough to have structure alone. There are plenty of guides for code and file creation. For example:</p>
<ul>
<li>files should be named appropriately (<a href="https://speakerdeck.com/jennybc/how-to-name-files">advice from Jenny Bryan</a>)</li>
<li>code should be consistent and follow a style guide (e.g. <a href="https://style.tidyverse.org/">the tidyverse style guide</a>), which is made easier with a linter, like <a href="https://github.com/jimhester/lintr">{lintr}</a></li>
<li>READMEs are provided throughout, but documentation should continue in the analysis files themselves, with sensible comments throughout</li>
</ul>
<p>The repo template focuses primarily on folder structure. It misses out some additional tools, including some that need a bit of further setup. You should think about including them anyway. For example:</p>
<ul>
<li>some form of dependency management, like <a href="https://github.com/rstudio/renv">{renv}</a></li>
<li>continuous integration, like <a href="https://travis-ci.org/">Travis CI</a></li>
<li>a <a href="https://en.wikipedia.org/wiki/Makefile">makefile</a>, integration with <a href="https://ropensci.github.io/drake/">{drake}</a>, or similar</li>
<li><a href="https://www.docker.com/">Docker</a></li>
<li>much much more</li>
</ul>
<p>There’s a certain amount of personal preference in the tools and techniques for these things and it’s probably best left to the user.</p>
<p>Let me know what you think is missing or what you would add.</p>
</div>
<div id="alternatives" class="section level1">
<h1>Alternatives</h1>
<p>Copying a repo template might not be optimal for you, but you can generate the structure for an analytical project in other ways.</p>
<p>One example is the <a href="https://github.com/lockedata/starters">{starters}</a> package from <a href="https://itsalocke.com/">Locke Data</a>, which can be installed with <code>remotes::install_github("lockedata/starters")</code>. The <code>create_analysis_project()</code> function sets up a project folder for you with various arguments to add certain folders and setup things like dependency management, git and continuous integration.</p>
<p>Another option is to set up your analysis as a package, as <a href="https://thomasleeper.com/2016/11/analysis-as-package/">outlined by Thomas J Leeper</a>, for example. Jenny Bryan and Hadley Wickham’s <a href="https://usethis.r-lib.org/">{usethis}</a> package provides lots of functions to help you create a package and add things to it, like <code>create_project()</code> and <code>use_git()</code>.</p>
<p>I like these two options more than the template, to be honest. The template is really for quick, simple analysis; mostly for my own purposes.</p>
<hr />
</div>
