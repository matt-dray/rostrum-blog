---
title: "Try R v4.2 in your browser"
author: 'Matt Dray'
date: '2022-06-01'
slug: try-r
categories:
  - code
  - package
tags:
  - binder
  - holepunch
  - lambda
  - magrittr
  - pipe
  - pipebind
  - r
draft: no
---



<div class="figure">
<p><img src="/post/2022-06-01-try-r-v4-2_files/r42-in-browser.png" alt="Screenshot of RStudio in a browser window. The script pane shows some use of the base pipe syntax. The console shows the R startup message, including that it is version 4.2." width="100%"/></p>
</div>
<div id="tldr" class="section level1">
<h1>tl;dr</h1>
<p>I made it so you can <a href="https://mybinder.org/v2/gh/matt-dray/try-Rv4.2/main?urlpath=rstudio">launch RStudio in the browser</a> with R v4.2 installed, so you can try out the new <code>|&gt;</code> and <code>\()</code> syntax without installing anything.</p>
</div>
<div id="just-browsering" class="section level1">
<h1>Just browsering</h1>
<p>Want to try R v4.2 from the safety of your browser without installing any software?</p>
<p>Maybe your organisation hasn’t moved to version 4.1 or higher yet, but you want a chance to noodle around with the cool new syntax that all the hip young trendsetters are yakking about.</p>
<p>Click the ‘launch binder’ badge below to launch R v4.2 and RStudio in your browser, thanks to <a href="https://mybinder.org/">the Binder project</a> and <a href="https://github.com/karthik/holepunch">{holepunch} package</a>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> You may need to wait a few moments for it to build.</p>
<p><a href="https://mybinder.org/v2/gh/matt-dray/try-Rv4.2/main?urlpath=rstudio"><img src="http://mybinder.org/badge_logo.svg" alt="Launch Rstudio Binder" /></a></p>
<p>Once loaded, click on the <code>get-started.R</code> file in the ‘files’ pane for a very simple introductory script with some basic introductions to the new syntax.</p>
<p>Two packages are also installed with the Binder instance:</p>
<ol style="list-style-type: decimal">
<li><a href="https://dplyr.tidyverse.org/">The {dplyr} package</a> authored by Hadley Wickham, Romain François, Lionel Henry and Kirill Müller. Installed so you can compare the base pipe against the {magrittr} pipe (<code>%&gt;%</code>), which was created by <a href="https://stefanbache.dk/">Stefan Milton-Bache</a> and made popular by the tidyverse.</li>
<li><a href="https://cran.r-project.org/package=pipebind">The {pipebind} package</a> by <a href="https://wiernik.org/">Brenton Wiernik</a>. Installed for you to <a href="https://github.com/bwiernik/pipebind/blob/main/README.md">explore some methods</a> for extending the functionality of the base pipe.</li>
</ol>
</div>
<div id="untaxing-syntax" class="section level1">
<h1>Untaxing syntax</h1>
<p>There are two major new features to try: the base pipe <code>|&gt;</code> and lambda syntax <code>\()</code>, which were both introduced in R v4.1 (May 2021). From <a href="https://cran.r-project.org/doc/manuals/r-devel/NEWS.html">R news</a>:</p>
<blockquote>
<p>R now provides a simple native forward pipe syntax |&gt;. The simple form of the forward pipe inserts the left-hand side as the first argument in the right-hand side call. The pipe implementation as a syntax transformation was motivated by suggestions from Jim Hester and Lionel Henry.</p>
</blockquote>
<blockquote>
<p>R now provides a shorthand notation for creating functions, e.g. (x) x + 1 is parsed as function(x) x + 1.</p>
</blockquote>
<p>An underscore placeholder <code>_</code> for the right-hand side of a base pipe was introduced in R v4.2 (April 2022). From <a href="https://cran.r-project.org/doc/manuals/r-devel/NEWS.html">R news</a>:</p>
<blockquote>
<p>In a forward pipe |&gt; expression it is now possible to use a named argument with the placeholder _ in the rhs [right-hand side] call to specify where the lhs [left-hand side] is to be inserted. The placeholder can only appear once on the rhs.</p>
</blockquote>
</div>
<div id="whos-been-piping-up" class="section level1">
<h1>Who’s been piping up?</h1>
<p>This post exists, at best, to help you play with R v4.2 and the latest features without installing anything. At worst, it might make you aware that the base pipe exists, or that Binder is magic.</p>
<p>What this post doesn’t do is explain in depth what the new features are all about. I suggest you take a look at the following materials for inspiration:</p>
<ul>
<li><a href="https://r4ds.hadley.nz/workflow-pipes.html">Hadley Wickham’s ‘Pipes’ chapter</a> in the work-in-progress second edition of R for Data Science (R4DS), which talks about why to use it and how it compares to <code>%&gt;%</code></li>
<li><a href="https://michaelbarrowman.co.uk/post/the-new-base-pipe/">Michael Barrowman’s post</a> ] about the speed of the new base pipe and what it’s doing under the hood</li>
<li><a href="https://www.infoworld.com/article/3621369/use-the-new-r-pipe-built-into-r-41.html">Sharon Machlis’s post</a> that provides an introduction and also points to materials for running different R versions in a Docker container</li>
<li><a href="https://ivelasq.rbind.io/blog/understanding-the-r-pipe/">Isabella Velásquez’s post</a>, with a story about solving a plotting problem with the base pipe</li>
<li><a href="https://eliocamp.github.io/codigo-r/en/2021/05/r-pipa-nativa/">Elio Campitelli’s post</a> that covers a number of things, including implications for {data.table}</li>
<li><a href="https://milesmcbain.micro.blog/2021/06/23/how-youd-fix.html">Miles McBain’s post</a> on the awkward ‘dog balls’ syntax for constructing anonymous functions on the right-hand side of a base pipe, which is partially fixed by the introduction of the underscore placeholder in R v4.2<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></li>
<li><a href="https://twitter.com/bmwiernik/status/1525631327005028352?s=20&amp;t=fXDY05jKBpKIHLOaIhGvjQ">Brenton Wiernik’s Twitter thread</a> about <a href="https://github.com/bwiernik/pipebind/blob/main/README.md">the {pipebind} package</a> to help address some of the base pipe’s shortcomings, including use of the placeholder multiple times on the right-hand side</li>
<li><a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/">Adolfo Álvarez’s charming post</a> on the history of pipes in R, including the inception of the base pipe</li>
</ul>
<p>And there’s probably loads more I’m missing. Let me know about them.</p>
<p>Regardless, this all very exciting for me because I have strong feelings about symbols in R. Do read my theory about <a href="https://www.rostrum.blog/2021/07/15/dollar-dollar/">how <code>$</code> notation is an INTERNATIONAL CONSPIRACY</a> and YOU ARE COMPLICIT. Or my method for <a href="https://www.rostrum.blog/2021/03/13/assign/">avoiding scripts that use the equals symbol for assignment</a>, yuck!</p>
<hr />
<details>
<summary>
Session info
</summary>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value
##  version  R version 4.2.0 (2022-04-22)
##  os       macOS Big Sur/Monterey 10.16
##  system   x86_64, darwin17.0
##  ui       X11
##  language (EN)
##  collate  en_GB.UTF-8
##  ctype    en_GB.UTF-8
##  tz       Europe/London
##  date     2022-06-01
##  pandoc   2.17.1.1 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/ (via rmarkdown)
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package     * version date (UTC) lib source
##  blogdown      1.9     2022-03-28 [1] CRAN (R 4.2.0)
##  bookdown      0.26    2022-04-15 [1] CRAN (R 4.2.0)
##  bslib         0.3.1   2021-10-06 [1] CRAN (R 4.2.0)
##  cli           3.2.0   2022-02-14 [1] CRAN (R 4.2.0)
##  digest        0.6.29  2021-12-01 [1] CRAN (R 4.2.0)
##  evaluate      0.15    2022-02-18 [1] CRAN (R 4.2.0)
##  fastmap       1.1.0   2021-01-25 [1] CRAN (R 4.2.0)
##  htmltools     0.5.2   2021-08-25 [1] CRAN (R 4.2.0)
##  jquerylib     0.1.4   2021-04-26 [1] CRAN (R 4.2.0)
##  jsonlite      1.8.0   2022-02-22 [1] CRAN (R 4.2.0)
##  knitr         1.39    2022-04-26 [1] CRAN (R 4.2.0)
##  magrittr      2.0.3   2022-03-30 [1] CRAN (R 4.2.0)
##  R6            2.5.1   2021-08-19 [1] CRAN (R 4.2.0)
##  rlang         1.0.2   2022-03-04 [1] CRAN (R 4.2.0)
##  rmarkdown     2.14    2022-04-25 [1] CRAN (R 4.2.0)
##  rstudioapi    0.13    2020-11-12 [1] CRAN (R 4.2.0)
##  sass          0.4.1   2022-03-23 [1] CRAN (R 4.2.0)
##  sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.2.0)
##  stringi       1.7.6   2021-11-29 [1] CRAN (R 4.2.0)
##  stringr       1.4.0   2019-02-10 [1] CRAN (R 4.2.0)
##  xfun          0.30    2022-03-02 [1] CRAN (R 4.2.0)
##  yaml          2.3.5   2022-02-21 [1] CRAN (R 4.2.0)
## 
##  [1] /Library/Frameworks/R.framework/Versions/4.2/Resources/library
## 
## ──────────────────────────────────────────────────────────────────────────────</code></pre>
</details>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>If you’re interested in the source, <a href="https://github.com/matt-dray/try-Rv4.2">it’s on GitHub</a>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Basically, you couldn’t pipe into an anonymous function like this: <code>mtcars |&gt; \(x) lm(hp ~ cyl, data = x)</code>. You had to use ‘dog balls’ or ‘eyes’, <code>()()</code>, like this: <code>mtcars |&gt; (\(x) lm(hp ~ cyl, data = x))()</code>. Not pleasing. As of R v4.2, you can use the placeholder to do this: <code>mtcars |&gt; lm(hp ~ cyl, data = _)</code>. However, you will still need the balls if you want to use the placeholder more than once on the right-hand side.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
