---
draft: no
title: 'EARL 2018: {crosstalk} in memes'
author: Matt Dray
date: '2018-09-12'
slug: crosstalk-memes
categories:
  - code
  - event
  - talk
tags:
  - crosstalk
  - earl
  - memes
  - r
  - tutorial
  - xaringan
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/d3/d3.min.js"></script>
<link href="/rmarkdown-libs/d3scatter/d3scatter.css" rel="stylesheet" />
<script src="/rmarkdown-libs/d3scatter/d3scatter.js"></script>
<script src="/rmarkdown-libs/d3scatter-binding/d3scatter.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>
<link href="/rmarkdown-libs/leaflet-easybutton/easy-button.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-easybutton/easy-button.js"></script>
<script src="/rmarkdown-libs/leaflet-easybutton/EasyButton-binding.js"></script>
<link href="/rmarkdown-libs/leaflet-locationfilter2/locationfilter.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-locationfilter2/locationfilter.js"></script>
<script src="/rmarkdown-libs/leaflet-locationfilter2/locationfilter-bindings.js"></script>
<link href="/rmarkdown-libs/ionicons/ionicons.min.css" rel="stylesheet" />


<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/doge.jpg" alt="The 'doge' meme: a shiba inu dog is surrounded by text in poor English, like 'such interact' and 'much widget'."></p>
<div id="earl-2018" class="section level1">
<h1>EARL 2018</h1>
<p>I gave a talk called ‘Crosstalk: Shiny-like without Shiny’<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> at the 2018 <a href="https://earlconf.com" target="_blank">EARL conference</a> in London.</p>
<p><a href="http://rstudio.github.io/crosstalk/" target="_blank">The {crosstalk} package</a> by <a href="https://twitter.com/jcheng?lang=en" target="_blank">Joe Cheng</a> allows <a href="https://www.htmlwidgets.org/" target="_blank">htmlwidgets</a>—JavaScript visualisations wrapped in R code—to interact with each other. Filtering the data in widget causes all widgets to be filtered. This can be done inside an <a href="https://rmarkdown.rstudio.com/" target="_blank">R Markdown</a> document (including <a href="https://rmarkdown.rstudio.com/flexdashboard/" target="_blank">Flexdashboard</a>) for easy server-less sharing in HTML format.</p>
</div>
<div id="crosstalk-in-action" class="section level1">
<h1>{crosstalk} in action</h1>
<p>Below is a very simple example from <a href="http://rstudio.github.io/crosstalk/using.html" target="_blank">the {crosstalk} documentation site</a>. Click and drag to highlight points in the interactive plot (<code>d3scatter</code> package) and ‘brush’ the map markers (button in upper left) on the interactive map (<code>leaflet</code> package) and see how selections in each impact each other. Without {crosstalk}, selections in one of these widgets <em>would not</em> impact the others.</p>
<p><div id="htmlwidget-1" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":{"x":[573,246,348,67,592,492,49,190,74,576,61,306,54,624,280,40,162,506,524,550,409,515,63,563,43,383,485,194,255,137,57,62,593,56,605,57,221,591,479,585,266,626,452,570,71,182,664,523,257,107,56,275,470,156,580,564,431,102,501,399,517,165,579,598,127,388,261,50,82,260,543,151,69,79,476,40,221,82,42,70,67,64,44,571,53,237,50,302,117,587,65,617,45,140,598,270,505,586,273,577],"y":[4,4.3,4.5,4.3,4.3,4.3,5,4.5,4.1,4.1,5.1,5.2,5.1,5.5,4.5,5.7,4.3,4.3,4.6,4.7,4.4,4.1,5,4,4.7,4,4.9,4.4,4.4,4.8,4.4,4.9,4.9,4.9,4.1,5.3,4.2,4.5,4.4,4.1,4.8,4.1,4.3,4.4,4.3,4.5,4.7,4.6,4.7,4.5,5.2,4,4.8,5.1,4.1,4.3,5.4,4.6,4.2,4.1,4.2,6,4.9,4.4,6.4,4.2,4.3,4.7,4.8,4.1,4.6,4.4,4.8,4.7,4.5,4.5,4.4,5.1,4.4,4.8,4.8,5.5,4.8,4.5,4.7,4.5,4.6,5,4.7,5,4.9,5,4.4,4.6,4.3,5.1,4.5,4.5,5.3,4.7],"key":["150","705","728","182","774","278","889","204","595","793","916","98","839","663","111","869","455","551","444","729","592","307","574","433","340","284","510","8","670","676","497","563","65","390","194","752","881","749","316","39","866","161","158","19","984","642","231","189","440","458","812","733","240","764","846","76","25","517","877","175","127","1000","561","20","152","112","206","516","7","62","540","417","930","644","438","999","365","445","107","594","292","531","572","124","136","817","743","745","87","356","223","238","508","527","923","261","225","526","564","584"]},"color_spec":{"type":"constant","value":"#333333"},"color":null,"x_label":"depth","y_label":"mag","x_lim":null,"y_lim":null,"group":"SharedData2722a110"},"evals":[],"jsHooks":[]}</script><div id="htmlwidget-2" style="width:100%;height:300px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addSelect","args":["SharedData2722a110"]},{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-17.9,-19.45,-19.28,-24.6,-21.63,-24.78,-22.82,-26.72,-21.79,-20.21,-21.52,-18.16,-20.89,-18.14,-15.75,-21.14,-20.81,-20.65,-19.83,-23.5,-21.58,-17.68,-20.41,-18.55,-27.1,-17.7,-25.59,-28.11,-18.6,-24.97,-15.9,-30.69,-20.68,-27,-24.08,-21.29,-18.4,-22.14,-17.4,-17.66,-19.1,-17.98,-24.81,-23.5,-27.99,-16.23,-19.4,-24.27,-16.1,-19,-19.34,-30.3,-24.96,-21.57,-17.56,-23.54,-19.66,-11.67,-18.85,-15.03,-19.3,-21.59,-17.99,-22.63,-15.56,-16.85,-21.97,-15.17,-11.7,-21.16,-17.56,-14.43,-14.1,-20.81,-20.3,-17.4,-18.8,-22.55,-34.89,-12.72,-13.34,-15.77,-18.85,-19.22,-16.24,-15.39,-22.1,-19.3,-21.5,-17.79,-22.43,-21.68,-11.76,-15.44,-17.98,-19.02,-23.77,-21.31,-21.92,-20.04],[181.5,184.48,182.78,183.5,180.77,179.22,184.52,183.35,185,181.9,169.75,183.41,185.26,180.87,185.23,174.21,184.7,182.22,182.54,180,181.9,181.36,186.51,182.23,182.18,185,180.02,181.93,184.28,182.85,185.3,182.1,181.41,183.88,179.5,185.77,184.84,180.64,181.02,181.4,169.63,180.5,180,179.78,183.5,167.91,180.94,179.88,185.32,185.6,186.59,180.8,180.22,183.86,181.23,180.04,180.28,166.02,182.2,182.29,183.84,170.56,181.57,180.31,167.62,182.31,182.32,187.2,166.1,182.4,181.59,167.26,166.01,185.01,182.3,187.8,169.21,183.81,180.6,166.28,166.2,167.01,187.55,182.43,168.02,185.1,185.3,183,170.5,181.32,184.48,180.63,165.96,167.18,181.61,184.23,180.16,180.84,182.8,181.87],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"ctKey":["150","705","728","182","774","278","889","204","595","793","916","98","839","663","111","869","455","551","444","729","592","307","574","433","340","284","510","8","670","676","497","563","65","390","194","752","881","749","316","39","866","161","158","19","984","642","231","189","440","458","812","733","240","764","846","76","25","517","877","175","127","1000","561","20","152","112","206","516","7","62","540","417","930","644","438","999","365","445","107","594","292","531","572","124","136","817","743","745","87","356","223","238","508","527","923","261","225","526","564","584"],"ctGroup":"SharedData2722a110"}]}],"limits":{"lat":[-34.89,-11.67],"lng":[165.96,187.8]}},"evals":[],"jsHooks":[]}</script></p>
<p>You can find <a href="http://rstudio-pubs-static.s3.amazonaws.com/209203_02f14fea3274448bbbf8d04c99c6051b.html" target="_blank">a more advanced example of {crosstalk} in action using Gapminder data</a>. It links HTML widgets from three packages – <code>leaflet</code>, <code>d3scatter</code> and <code>DT</code> – and includes a couple of sliders for filtering. All of this in less than 80 lines of code.</p>
<p>Remember all this is happening <em>in the browser</em> and <em>without Shiny</em>. And all you need to do is give each of your widgets a ‘shared data’ object. So instead of this:</p>
<pre class="r"><code>data &lt;- readRDS(&quot;data/some_data.RDS&quot;)  # get data
datatable(data)  # interactive table
leaflet(data) %&gt;% addTiles() %&gt;% addMarkers()  # map</code></pre>
<p>We can just add one extra line to create the shared data object and pass that to our widgets instead:</p>
<pre class="r"><code>data &lt;- readRDS(&quot;data/some_data.RDS&quot;)
shared &lt;- SharedData$new(data)  # just add this line
datatable(shared)  # now refer to the shared data object
leaflet(shared) %&gt;% addTiles() %&gt;% addMarkers()</code></pre>
</div>
<div id="slides" class="section level1">
<h1>Slides</h1>
<p>My task: I had to create a very simple app for our users to explore schools data. My problem: I didn’t have a server for hosting such an app. In other words, <a href="https://shiny.rstudio.com/" target="_blank">Shiny</a> wasn’t really feasible in this case.</p>
<p>I’ve embedded the slides below. Click inside the frame and use the left and right arrow keys to navigate. Press ‘p’ to see the presenter notes.</p>
<iframe src="https://matt-dray.github.io/earl18-presentation/" width="700" height="525" frameborder="0" allowtransparency="true" allow="encrypted-media">
</iframe>
<p>You can also <a href="https://matt-dray.github.io/earl18-presentation/" target="_blank">view the slides in a dedicated browser tab</a>.</p>
<p>On GitHub you can find <a href="https://github.com/matt-dray/earl18-presentation" target="_blank">code for the presentation</a>, written with <a href="https://bookdown.org/yihui/rmarkdown/xaringan.html" target="_blank">the <code>xaringan</code> package</a>, and <a href="https://github.com/matt-dray/earl18-crosstalk" target="_blank">code for the dummy examples in it</a>.</p>
</div>
<div id="memestravaganza" class="section level1">
<h1>Memestravaganza</h1>
<p>Since it’s 2018, the only way to publicise such a presentation is to exploit the power of <a href="https://knowyourmeme.com/memes/memes" target="_blank">memes</a> and social media; the only method for communicating with <a href="https://eu.usatoday.com/story/money/2017/05/22/avocado-latte-may-just-what-hipster-millennials-dreamed-maybe-not/102002538/" target="_blank">millenials</a> and <a href="https://i.kym-cdn.com/entries/icons/mobile/000/023/078/youngling.jpg" target="_blank">younglings</a> these days.</p>
<p>But why stop at one meme? Why not a <em>meme advent calendar</em> counting down the week in advance of the conference?<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> You can <a href="https://github.com/matt-dray/earl18-presentation/blob/master/memes/links.md" target="_blank">find them all (plus bonuses) in my earl18-presentation GitHub repo</a></p>
<p>I’ve reproduced them here with a bit more context.</p>
<div id="day-one" class="section level2">
<h2>Day one</h2>
<p><a href="https://twitter.com/mattdray/status/1037226196797415425" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/scroll-of-truth.jpg" alt="An explorer finds the scroll of truth and it says 'Shiny isn't always the answer, so he throws it away in disgust."></p>
<p>Yeah, so I figured that Shiny was the only way to make interactive apps with R. But I had a problem: no server access for hosting the app. {crosstalk} is worth considering in this instance because you can share outputs as HTML files, which will open in the user’s browser.</p>
</div>
<div id="day-two" class="section level2">
<h2>Day two</h2>
<p><a href="https://twitter.com/mattdray/status/1037597114874912769" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/is-this.jpg" alt="A man, labelled 'me six months ago' gestures to a butterfly labelled 'crosstalk + flexdashboard' and says 'is this Shiny?'"></p>
<p>R users can probably recognise an interactive app made with Shiny<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. Probably a <a href="https://rmarkdown.rstudio.com/flexdashboard/" target="_blank">Flexdashboard</a> is easy to recognise too; these are typically used for non-interactive dashboard displays, but {crosstalk} can be used to blur this line by making the elements interact with each other.</p>
</div>
<div id="day-three" class="section level2">
<h2>Day three</h2>
<p><a href="https://twitter.com/mattdray/status/1037951262766055424" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/american-chopper-argument.jpg" alt="A man argues that the other must use Shiny because it's the only way to get interactivity; the other man says {crosstalk} solves this; the first man relents."></p>
<p>Self-explanatory, really. A small app can be made using {crosstalk} and shared freely. Try it!</p>
</div>
<div id="day-four" class="section level2">
<h2>Day four</h2>
<p><a href="https://twitter.com/mattdray/status/1038306444045639680" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/trump.jpg" alt="President Trump holds up a document he has just signed, which reads 'CROOKED Hillary hosts Shiny apps on a PRIVATE server! EVERYONE agrees that TRUE Americans consider CROSSTALK!'"></p>
<p>It’s 2018. You’ve got to exploit Trump for personal gain at some point. One potential drawback of Shiny is the need to host the app on a server. Not ideal if you don’t have access to one. This is not a problem with {crosstalk}-enabled tools, which you can share as HTML files.</p>
<p>Bonus:</p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/msssagg.jpg" alt="A red Trump supporter hat embroidered with the phrase 'make sharing small simple apps great again'." width="200"></p>
</div>
<div id="day-five" class="section level2">
<h2>Day five</h2>
<p><a href="https://twitter.com/mattdray/status/1038727929998598145" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/trace-cat.jpg" alt="A girl traces around her cat labelled 'Shiny', revealing a poor rendering underneath labelled 'Crosstalk'."></p>
<p>Yeah, so there’s a false equivalency here. {crosstalk} doesn’t necessarily help provide a direct replacement for Shiny. You still need Shiny to make ‘proper’ apps. But hey, the picture that the little girl has drawn still looks like a cat, right?</p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/bad-boy.jpg" alt="A car salesman slaps the roof of a car and says 'This bad boy fits so few data in it' to a customer."></p>
<p>Since everything is rendered in-browser with {crosstalk}, you’re limited by your browser’s power. This means that the number of points on your interactive map, for example, is limited. In practice it’s maybe a couple of hundred. You can get around this by controlling point layers that can be switched on and off so fewer points are rendered at any one point But that’s a pain.</p>
</div>
<div id="day-six" class="section level2">
<h2>Day six</h2>
<p><a href="https://twitter.com/mattdray/status/1039034098214416384" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/swerve.jpg" alt="A car labelled 'me realising how simple Crosstalk is' swerves off the freeway, labelled 'data', onto the off-ramp labelled 'SharedData$new(data)'."></p>
<p>Let’s say you’ve read your data into the object <code>data</code>. Ordinarily you would do <code>leaflet::leaflet(data)</code>, <code>DT::datatable(data)</code>, etc, to create HTML widgets containing the data. To get the widgets to talk to each other with {crosstalk}, you make a <em>shared data</em> object: <code>shared &lt;- SharedData$new(data)</code>. Now you can do <code>leaflet::leaflet(shared)</code>, <code>DT::datatable(shared)</code>, etc, to get widget interactivity. Only one extra line of code is needed.</p>
</div>
<div id="day-seven" class="section level2">
<h2>Day seven</h2>
<p><a href="https://twitter.com/mattdray/status/1039395576352329729" target="_blank">Link to tweet</a></p>
<p><img src="https://raw.githubusercontent.com/matt-dray/earl18-presentation/master/memes/arms.jpg" alt="Two muscular arms labelled 'Shiny' and 'Crosstalk' grip their hands, labelled 'sweet apps', in triumph."></p>
<p>You can use both frameworks to do cool stuff! Just consider the context and the limitations of {crosstalk} when you do this.</p>
<p>Also, turns out I punked you: my talk was called ‘Crosstalk: Shiny-like without Shiny’ but <a href="http://rstudio.github.io/crosstalk/shiny.html" target="_blank">you can actually put Shiny in your {crosstalk}</a>. Why? Your brushing and filtering with {crosstalk} can be used to generate Shiny outputs and vice versa. For simplicity, my talk focuses only on {crosstalk}</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Running joke: <em>Shiny without Shiny? Sounds like a <strong>dull</strong> talk lol.</em><a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Answer: because you have better things to do.<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Yeah, but have you seen <a href="https://mbienz.shinyapps.io/tourism_dashboard_prod/" target="_blank">The New Zealand tourism dashboard</a>?<a href="#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
