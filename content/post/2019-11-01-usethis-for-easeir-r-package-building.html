---
title: 'Build an R package with {usethis}'
author: Matt Dray
date: '2019-11-01'
slug: usethis
categories:
  - code
  - tutorial
  - package
  - talk
tags:
  - cats
  - devtools
  - git
  - github
  - glue
  - pkgdown
  - roxygen2
  - testthat
  - usethis
  - xaringan
draft: no
---



<div class="figure">
<img src="/post/2019-11-01-usethis-for-easeir-r-package-building_files/ossie.jpeg" alt="A black cat lounging across a large wooden table." width=500 />
<p class="caption">
Ossie, a Cabinet Office cat (via <a href="https://twitter.com/cabinetofficeuk/status/807195882823319552/photo/1" target="_blank">@cabinetofficeuk</a>)
</p>
</div>
<div id="coffee-packaging" class="section level1">
<h1>Coffee packaging</h1>
<p>I gave a talk at a <a href="https://co-analysis.github.io/co-coffee-and-coding/" target="_blank">Cabinet Office Coffee &amp; Coding session</a> about building R packages. The emphasis was on the {usethis} package, which contains lots of package-setup functions that make your life easier.</p>
<p>Click on the slides embedded below and cycle through with your arrow keys, or <a href="https://matt-dray.github.io/r-pkg-slides/#1" target="_blank">you can open them fullscreen in a dedicated browser tab</a>.</p>
<iframe src="https://matt-dray.github.io/r-pkg-slides/" width="700" height="525" frameborder="0" allowtransparency="true" allow="encrypted-media">
</iframe>
<p>I made the slides using <a href="https://slides.yihui.name/xaringan/" target="_blank">Yihui Xie’s {xaringan} implementation of remark.js</a> and I used my own {gdstheme} package for the theme (<a href="https://www.rostrum.blog/2019/05/24/xaringan-template/" target="_blank">read the blog</a> or <a href="https://github.com/matt-dray/gdstheme" target="_blank">see the source on GitHub</a>).</p>
</div>
<div id="talk-summary" class="section level1">
<h1>Talk summary</h1>
<p>Basically you can make a minimal R package with only:</p>
<ul>
<li><code>usethis::create_package()</code> to set up the minimal package structure</li>
<li><code>usethis::create_r()</code> to set up a script for your functions</li>
<li><code>devtools::document()</code> to generate minimal documentation from your files</li>
</ul>
<p>The {usethis} package also helps you set up internal and long-form documentation, testing, version control, a GitHub repository and more. {pkgdown} even generates a website from your documentation to make it more user-friendly.</p>
</div>
<div id="cat-egorise" class="section level1">
<h1>Cat-egorise</h1>
<p>In the session I live-built a package called {cabinet}. You can:</p>
<ul>
<li>look at the package’s <a href="https://github.com/matt-dray/cabinet/" target="_blank">source code on GitHub</a></li>
<li>see the package’s <a href="https://matt-dray.github.io/cabinet/" target="_blank">website</a>, made with {pkgdown}</li>
<li>install the package yourself with <code>remotes::install_github(&quot;matt-dray/cabinet&quot;)</code></li>
</ul>
<p>The package only has one (very important) function, <code>cabinet_cat()</code>, which checks whether a supplied character string matches the name of either of <a href="https://www.bbc.co.uk/news/uk-politics-38262832" target="_blank">the Cabinet Office’s cats</a>.</p>
<p>Like:</p>
<pre class="r"><code>library(cabinet)
cabinet_cat(&quot;Ossie&quot;)</code></pre>
<pre><code>## Ossie is a good Cabinet Office kitty.</code></pre>
<pre class="r"><code>cabinet_cat(&quot;Larry&quot;)</code></pre>
<pre><code>## Larry isn&#39;t a Cabinet Office cat!</code></pre>
<pre class="r"><code>cabinet_cat(&quot;Garfield&quot;)</code></pre>
<pre><code>## You&#39;ve much to learn about government cats.</code></pre>
</div>
<div id="excellent-resources" class="section level1">
<h1>Excellent resources</h1>
<p>There are some really good resources out there already. I like the following:</p>
<ul>
<li>Hilary Parker’s <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/" target="_blank">post</a> (beginner)</li>
<li>Tomas Westlake’s <a href="https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/" target="_blank">update</a> (beginner)</li>
<li>Karl Broman’s <a href="https://kbroman.org/pkg_primer/" target="_blank">site</a> (intermediate)</li>
<li>Hadley Wickham’s <a href="http://r-pkgs.had.co.nz/" target="_blank">book</a> (intermediate/advanced)</li>
</ul>
<p>Tom’s post is probably the best place to start if you want to create a package with {usethis} from scratch as a beginner.</p>
</div>
