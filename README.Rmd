---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r attach-pkgs, message=FALSE}
# Attach packages
library(tidyverse) # CRAN v1.3.0
library(rvest)     # CRAN v1.0.0
library(lubridate) # CRAN v1.7.10
library(knitr)     # CRAN v1.31
library(sonify)    # CRAN v0.0-1
library(tuneR)     # CRAN v1.3.3
library(emo)       # [github::hadley/emo] v0.0.0.9000
```

```{r scrape-blog}
# Scrape the rostrum.blog home page
html <- read_html("https://rostrum.blog/")  # the site's homepage lists the posts

# Extract the post titles
title <- html %>%
  html_nodes(".archive-item-link") %>%  # node identified with SelectorGadget 
  html_text()  # extract the text from the node

# Extract the post dates
date <- html %>%
  html_nodes(".archive-item-date") %>%  # element with the data we care about
  html_text() %>%  # convert to text
  str_replace_all("\n|[:space:]", "")  # replace newline-space with blank

# Dataframe of titles and dates
posts <- tibble(title = title, publish_date = ymd(date)) %>% 
  transmute(n = nrow(.):1, publish_date, title)
```

```{r plot-obj}
rostrum_green <- "#1D8016"

                   # Create plot object
p <- posts %>%
  mutate(count = 1) %>%   # dummy to indicate a post was made
  ggplot(aes(x = publish_date, y = count)) +
  geom_point(
    shape = "|", size = 8, stroke = 1,
    color = rostrum_green,
    fill = "transparent"
  ) +
  theme(
    panel.background = element_rect(fill = "transparent"),
    plot.background = element_rect(fill = "transparent", color = NA),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.title = element_blank(),
    axis.ticks.y = element_blank(),
    axis.text.y = element_blank(),
    axis.text.x = element_text(color = rostrum_green, size = 10),
    axis.ticks.x = element_line(color = rostrum_green)
  )
```

```{r sonify}
posts_per_day <- left_join(
  as_tibble(as_date(ymd("2020-03-23"):today())),
  count(posts, publish_date),
  by = c("value" = "publish_date")
) %>% 
  replace_na(list(n = 0))

sonified_posts <- sonify(posts_per_day$n, play = FALSE)

writeWave(sonified_posts, "README_files/audio/posts.wav")
```

<img src="https://raw.githubusercontent.com/matt-dray/stickers/master/output/rostrum_hex.png" alt="Hexagonal design containing the text 'rostrum.blog' and the blog's logo of a 16-bit insect." width="150" align="right">

# rostrum-blog

<!-- badges: start -->
[![rostrum.blog
post](https://img.shields.io/badge/rostrum-blog-008900?style=flat&labelColor=black&logo=data:image/gif;base64,R0lGODlhEAAQAPEAAAAAABWCBAAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkISIiEoQQQgghRBBCiCAIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiESIoQQQgghhAhCBCEIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAA7)](https://www.rostrum.blog/)
[![License: CC BY-NC-SA 4.0](https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by-nc-sa/4.0/)
[![Netlify Status](https://api.netlify.com/api/v1/badges/ebfbdae4-a903-43e8-9f53-75becd95b42e/deploy-status)](https://app.netlify.com/sites/rostrum/deploys)
<!-- badges: end -->

These are the source files for [rostrum.blog](https://www.rostrum.blog/), a blog about fun and learning with the R language. Read more on the [about](https://www.rostrum.blog/about/) page.

# Stats

There have been `r nrow(posts)` posts on the blog since the first one was published on `r min(posts$publish_date)`. `r if (format(today(), "%m-%d") == format(min(posts$publish_date), "%m-%d")) emo::ji("balloon")`

That's a post roughly every `r round((as.numeric(today() - min(posts$publish_date))) / nrow(posts))` days, or about `r round(((nrow(posts) / (as.numeric(today() - min(posts$publish_date)))) * 30))` posts per month.

The latest post was published `r today() - max(posts$publish_date)` days ago on on `r max(posts$publish_date)`.

This plot shows posts over time:

```{r plot-out, fig.height=1, fig.width=10}
p
```

Press play to hear a sonified version of the chart:

<html><audio controls><source src="README_files/audio/posts.wav" type="audio/wav"></audio></html>
<br>
<br>
<details><summary>Click to expand a full list of posts</summary>
```{r}
posts %>%
  rename(`Number` = n, Date = publish_date, Title = title) %>% 
  kable()
```
</details>

# Infrastructure

The site is generated with [{blogdown}](https://bookdown.org/yihui/blogdown/) and uses a customised version of [the Lithium theme](https://github.com/jrutheiser/hugo-lithium-theme) modified by [Yihui Xie](https://github.com/yihui/hugo-lithium-theme). The site is hosted with [Netlify](https://www.netlify.com/).

---

_Last updated `r today()`_
